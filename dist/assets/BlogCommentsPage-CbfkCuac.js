import{G as C,k as t,B as m}from"./index-isBeRo1b.js";import{u as S}from"./useClosable-Dwegbn33.js";import{u as p,s as n}from"./index-DOY2cXOq.js";import{T as b,o as k,a as q}from"./client-D49sAvGJ.js";import{b as d}from"./blog-CjXuTVqA.js";import{P as v}from"./PageHeader-CzhsRgKs.js";import{d as z}from"./dayjs.min-D51Aj4CE.js";import{C as I,S as M}from"./index-CUCRgLKV.js";import{F as T}from"./Table-CbaHfp0x.js";import{T as R}from"./index-CDKBTdtS.js";import{P as w}from"./index-DeMcSX5K.js";import{R as E}from"./DeleteOutlined-BdlBkdV1.js";import"./InfoCircleFilled-Ko0Gchp7.js";import"./index-BiEyZbEs.js";import"./DownOutlined-C7Jp90Yl.js";import"./index-Dh7qLhW3.js";const{Text:g}=b,J=()=>{const u=C(),{data:l,isLoading:y}=S({queryKey:["blog-comments"],queryFn:()=>d.getAllComments()}),c=p({mutationFn:({id:e,status:s})=>d.updateCommentStatus(e,s),onSuccess:()=>{n.success("Status yangilandi!"),u.invalidateQueries({queryKey:["blog-comments"]})},onError:e=>{var a,o,r,i;console.error("Update Comment Status Error:",e);const s=((o=(a=e.response)==null?void 0:a.data)==null?void 0:o.error)||((i=(r=e.response)==null?void 0:r.data)==null?void 0:i.message)||e.message||"Noma'lum xatolik";n.error(s)}}),x=p({mutationFn:e=>d.deleteComment(e),onSuccess:()=>{n.success("Izoh o'chirildi!"),u.invalidateQueries({queryKey:["blog-comments"]})},onError:e=>{var a,o,r,i;console.error("Delete Comment Error:",e);const s=((o=(a=e.response)==null?void 0:a.data)==null?void 0:o.error)||((i=(r=e.response)==null?void 0:r.data)==null?void 0:i.message)||e.message||"Noma'lum xatolik";n.error(s)}}),h={pending:"orange",approved:"green",rejected:"red"},j={pending:"Kutilmoqda",approved:"Tasdiqlangan",rejected:"Rad etilgan"},f=[{title:"Muallif",key:"author",width:160,render:(e,s)=>t.jsxs("div",{children:[t.jsx(g,{strong:!0,style:{color:"var(--text-primary)"},children:s.guestName}),t.jsx("br",{}),t.jsx(g,{style:{fontSize:12,color:"var(--text-muted)"},children:s.guestEmail})]})},{title:"Izoh",dataIndex:"content",key:"content",ellipsis:!0},{title:"Status",dataIndex:"status",key:"status",width:130,render:e=>t.jsx(R,{color:h[e],children:j[e]})},{title:"Sana",dataIndex:"createdAt",key:"createdAt",width:120,render:e=>z(e).format("DD.MM.YYYY HH:mm")},{title:"Amallar",key:"actions",width:160,render:(e,s)=>t.jsxs(M,{children:[s.status!=="approved"&&t.jsx(m,{size:"small",type:"primary",icon:t.jsx(k,{}),onClick:()=>c.mutate({id:s.id,status:"approved"}),title:"Tasdiqlash",style:{background:"#10b981"}}),s.status!=="rejected"&&t.jsx(m,{size:"small",danger:!0,icon:t.jsx(q,{}),onClick:()=>c.mutate({id:s.id,status:"rejected"}),title:"Rad etish"}),t.jsx(w,{title:"O'chirishni tasdiqlaysizmi?",onConfirm:()=>x.mutate(s.id),children:t.jsx(m,{size:"small",danger:!0,icon:t.jsx(E,{})})})]})}];return t.jsxs("div",{className:"space-y-4",children:[t.jsx(v,{title:"Blog Izohlar",subtitle:"Izohlarni moderatsiya qilish"}),t.jsx(I,{children:t.jsx(T,{columns:f,dataSource:(l==null?void 0:l.data)||[],rowKey:"id",loading:y,pagination:{pageSize:10}})})]})};export{J as default};
