import{r as n,H as Y,J as Dt,M as E,c as W,N as Be,p as ht,_ as V,P as q,q as et,Q as at,S as Oe,g as pt,m as Ge,u as X,a as Bt,b as Ht,f as Ze,T as fe,U as Ft,V as kt,W as Ee,X as qe,I as Pe,Y as Re,Z as Xt,$ as Ue,C as Yt,a0 as He,e as Wt,a1 as Vt,G as Gt,k as R,B as _e}from"./index-F3grSWdG.js";import{u as rt}from"./useClosable-uJIj1gsA.js";import{u as Se,s as ce}from"./index-DVxfzCL-.js";import{u as Zt,P as Ct,d as wt,e as qt,a as Ut,f as yt,h as bt,R as Kt,c as he}from"./client-CX91g6yc.js";import{c as Qt}from"./categories-C0Tbv_kI.js";import{C as Jt}from"./CrudDrawer-VwFJGtif.js";import{A as eo}from"./ActionButtons-CRKm-3pF.js";import{P as to}from"./PageHeader-Cabh6d31.js";import{F as Ie}from"./index-Cv5QttRn.js";import{a as $e,F as oo}from"./Table-B2BAtLIv.js";import{I as xt}from"./index-CZbTi1p4.js";import{S as Me}from"./index-C7_EJlaz.js";import{R as it}from"./DeleteOutlined-iu_k66-Y.js";import{i as St,U as lt,R as st}from"./UploadOutlined-C8kOzndP.js";import{S as no}from"./index-DEZQ1x4x.js";import{D as ao}from"./index-Dj6CL_jc.js";import{R as Ke}from"./index-Bf1aI_MO.js";import{T as Ve}from"./index-DLxPakHX.js";import"./InfoCircleFilled-C9q2btrd.js";import"./index-lsxE6RmN.js";import"./QuestionCircleOutlined-NOAkvmT8.js";import"./DownOutlined-Bz--1KPw.js";var It=n.createContext({});function ct(e,t,o){var a=t;return!a&&o&&(a="".concat(e,"-").concat(o)),a}function dt(e,t){var o=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof o!="number"){var i=e.document;o=i.documentElement[a],typeof o!="number"&&(o=i.body[a])}return o}function ro(e){var t=e.getBoundingClientRect(),o={left:t.left,top:t.top},a=e.ownerDocument,i=a.defaultView||a.parentWindow;return o.left+=dt(i),o.top+=dt(i,!0),o}const io=n.memo(function(e){var t=e.children;return t},function(e,t){var o=t.shouldUpdate;return!o});var lo={width:0,height:0,overflow:"hidden",outline:"none"},so={outline:"none"},co=Y.forwardRef(function(e,t){var o=e.prefixCls,a=e.className,i=e.style,l=e.title,c=e.ariaId,s=e.footer,d=e.closable,f=e.closeIcon,v=e.onClose,m=e.children,p=e.bodyStyle,b=e.bodyProps,C=e.modalRender,M=e.onMouseDown,$=e.onMouseUp,I=e.holderRef,j=e.visible,P=e.forceRender,N=e.width,g=e.height,w=e.classNames,h=e.styles,y=Y.useContext(It),T=y.panel,O=Dt(I,T),x=n.useRef(),z=n.useRef();Y.useImperativeHandle(t,function(){return{focus:function(){var F;(F=x.current)===null||F===void 0||F.focus({preventScroll:!0})},changeActive:function(F){var ee=document,ae=ee.activeElement;F&&ae===z.current?x.current.focus({preventScroll:!0}):!F&&ae===x.current&&z.current.focus({preventScroll:!0})}}});var A={};N!==void 0&&(A.width=N),g!==void 0&&(A.height=g);var r=s?Y.createElement("div",{className:W("".concat(o,"-footer"),w==null?void 0:w.footer),style:E({},h==null?void 0:h.footer)},s):null,u=l?Y.createElement("div",{className:W("".concat(o,"-header"),w==null?void 0:w.header),style:E({},h==null?void 0:h.header)},Y.createElement("div",{className:"".concat(o,"-title"),id:c},l)):null,S=n.useMemo(function(){return Be(d)==="object"&&d!==null?d:d?{closeIcon:f??Y.createElement("span",{className:"".concat(o,"-close-x")})}:{}},[d,f,o]),L=ht(S,!0),_=Be(d)==="object"&&d.disabled,H=d?Y.createElement("button",V({type:"button",onClick:v,"aria-label":"Close"},L,{className:"".concat(o,"-close"),disabled:_}),S.closeIcon):null,G=Y.createElement("div",{className:W("".concat(o,"-content"),w==null?void 0:w.content),style:h==null?void 0:h.content},H,u,Y.createElement("div",V({className:W("".concat(o,"-body"),w==null?void 0:w.body),style:E(E({},p),h==null?void 0:h.body)},b),m),r);return Y.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":l?c:null,"aria-modal":"true",ref:O,style:E(E({},i),A),className:W(o,a),onMouseDown:M,onMouseUp:$},Y.createElement("div",{ref:x,tabIndex:0,style:so},Y.createElement(io,{shouldUpdate:j||P},C?C(G):G)),Y.createElement("div",{tabIndex:0,ref:z,style:lo}))}),Rt=n.forwardRef(function(e,t){var o=e.prefixCls,a=e.title,i=e.style,l=e.className,c=e.visible,s=e.forceRender,d=e.destroyOnClose,f=e.motionName,v=e.ariaId,m=e.onVisibleChanged,p=e.mousePosition,b=n.useRef(),C=n.useState(),M=q(C,2),$=M[0],I=M[1],j={};$&&(j.transformOrigin=$);function P(){var N=ro(b.current);I(p&&(p.x||p.y)?"".concat(p.x-N.left,"px ").concat(p.y-N.top,"px"):"")}return n.createElement(et,{visible:c,onVisibleChanged:m,onAppearPrepare:P,onEnterPrepare:P,forceRender:s,motionName:f,removeOnLeave:d,ref:b},function(N,g){var w=N.className,h=N.style;return n.createElement(co,V({},e,{ref:t,title:a,ariaId:v,prefixCls:o,holderRef:g,style:E(E(E({},h),i),j),className:W(l,w)}))})});Rt.displayName="Content";var uo=function(t){var o=t.prefixCls,a=t.style,i=t.visible,l=t.maskProps,c=t.motionName,s=t.className;return n.createElement(et,{key:"mask",visible:i,motionName:c,leavedClassName:"".concat(o,"-mask-hidden")},function(d,f){var v=d.className,m=d.style;return n.createElement("div",V({ref:f,style:E(E({},m),a),className:W("".concat(o,"-mask"),v,s)},l))})},mo=function(t){var o=t.prefixCls,a=o===void 0?"rc-dialog":o,i=t.zIndex,l=t.visible,c=l===void 0?!1:l,s=t.keyboard,d=s===void 0?!0:s,f=t.focusTriggerAfterClose,v=f===void 0?!0:f,m=t.wrapStyle,p=t.wrapClassName,b=t.wrapProps,C=t.onClose,M=t.afterOpenChange,$=t.afterClose,I=t.transitionName,j=t.animation,P=t.closable,N=P===void 0?!0:P,g=t.mask,w=g===void 0?!0:g,h=t.maskTransitionName,y=t.maskAnimation,T=t.maskClosable,O=T===void 0?!0:T,x=t.maskStyle,z=t.maskProps,A=t.rootClassName,r=t.classNames,u=t.styles,S=n.useRef(),L=n.useRef(),_=n.useRef(),H=n.useState(c),G=q(H,2),U=G[0],F=G[1],ee=Zt();function ae(){at(L.current,document.activeElement)||(S.current=document.activeElement)}function le(){if(!at(L.current,document.activeElement)){var D;(D=_.current)===null||D===void 0||D.focus()}}function Z(D){if(D)le();else{if(F(!1),w&&S.current&&v){try{S.current.focus({preventScroll:!0})}catch{}S.current=null}U&&($==null||$())}M==null||M(D)}function se(D){C==null||C(D)}var te=n.useRef(!1),oe=n.useRef(),k=function(){clearTimeout(oe.current),te.current=!0},de=function(){oe.current=setTimeout(function(){te.current=!1})},K=null;O&&(K=function(B){te.current?te.current=!1:L.current===B.target&&se(B)});function re(D){if(d&&D.keyCode===Oe.ESC){D.stopPropagation(),se(D);return}c&&D.keyCode===Oe.TAB&&_.current.changeActive(!D.shiftKey)}n.useEffect(function(){c&&(F(!0),ae())},[c]),n.useEffect(function(){return function(){clearTimeout(oe.current)}},[]);var ue=E(E(E({zIndex:i},m),u==null?void 0:u.wrapper),{},{display:U?null:"none"});return n.createElement("div",V({className:W("".concat(a,"-root"),A)},ht(t,{data:!0})),n.createElement(uo,{prefixCls:a,visible:w&&c,motionName:ct(a,h,y),style:E(E({zIndex:i},x),u==null?void 0:u.mask),maskProps:z,className:r==null?void 0:r.mask}),n.createElement("div",V({tabIndex:-1,onKeyDown:re,className:W("".concat(a,"-wrap"),p,r==null?void 0:r.wrapper),ref:L,onClick:K,style:ue},b),n.createElement(Rt,V({},t,{onMouseDown:k,onMouseUp:de,ref:_,closable:N,ariaId:ee,prefixCls:a,visible:c&&U,onClose:se,onVisibleChanged:Z,motionName:ct(a,I,j)}))))},Mt=function(t){var o=t.visible,a=t.getContainer,i=t.forceRender,l=t.destroyOnClose,c=l===void 0?!1:l,s=t.afterClose,d=t.panelRef,f=n.useState(o),v=q(f,2),m=v[0],p=v[1],b=n.useMemo(function(){return{panel:d}},[d]);return n.useEffect(function(){o&&p(!0)},[o]),!i&&c&&!m?null:n.createElement(It.Provider,{value:b},n.createElement(Ct,{open:o||i||m,autoDestroy:!1,getContainer:a,autoLock:o||m},n.createElement(mo,V({},t,{destroyOnClose:c,afterClose:function(){s==null||s(),p(!1)}}))))};Mt.displayName="Dialog";function ut(e){return{position:e,inset:0}}const $t=e=>{const{componentCls:t,antCls:o}=e;return[{[`${t}-root`]:{[`${t}${o}-zoom-enter, ${t}${o}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${o}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},ut("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},ut("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:St(e)}]},fo=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${X(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},Bt(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${X(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:X(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},Ht(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${X(e.borderRadiusLG)} ${X(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${X(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},vo=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},go=e=>{const{componentCls:t}=e,o=qt(e),a=Object.assign({},o);delete a.xs;const i=`--${t.replace(".","")}-`,l=Object.keys(a).map(c=>({[`@media (min-width: ${X(a[c])})`]:{width:`var(${i}${c}-width)`}}));return{[`${t}-root`]:{[t]:[].concat(Ze(Object.keys(o).map((c,s)=>{const d=Object.keys(o)[s-1];return d?{[`${i}${c}-width`]:`var(${i}${d}-width)`}:null})),[{width:`var(${i}xs-width)`}],Ze(l))}}},ho=e=>{const t=e.padding,o=e.fontSizeHeading5,a=e.lineHeightHeading5;return Ge(e,{modalHeaderHeight:e.calc(e.calc(a).mul(o).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},po=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${X(e.paddingMD)} ${X(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${X(e.padding)} ${X(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${X(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${X(e.paddingXS)} ${X(e.padding)}`:0,footerBorderTop:e.wireframe?`${X(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${X(e.borderRadiusLG)} ${X(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${X(e.padding*2)} ${X(e.padding*2)} ${X(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM});pt("Modal",e=>{const t=ho(e);return[fo(t),vo(t),$t(t),wt(t,"zoom"),go(t)]},po,{unitless:{titleLineHeight:!0}});function Nt(){var e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}function Co(e){var t=e.getBoundingClientRect(),o=document.documentElement;return{left:t.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||document.body.clientTop||0)}}var Te=n.createContext(null),wo=function(t){var o=t.visible,a=t.maskTransitionName,i=t.getContainer,l=t.prefixCls,c=t.rootClassName,s=t.icons,d=t.countRender,f=t.showSwitch,v=t.showProgress,m=t.current,p=t.transform,b=t.count,C=t.scale,M=t.minScale,$=t.maxScale,I=t.closeIcon,j=t.onActive,P=t.onClose,N=t.onZoomIn,g=t.onZoomOut,w=t.onRotateRight,h=t.onRotateLeft,y=t.onFlipX,T=t.onFlipY,O=t.onReset,x=t.toolbarRender,z=t.zIndex,A=t.image,r=n.useContext(Te),u=s.rotateLeft,S=s.rotateRight,L=s.zoomIn,_=s.zoomOut,H=s.close,G=s.left,U=s.right,F=s.flipX,ee=s.flipY,ae="".concat(l,"-operations-operation");n.useEffect(function(){var B=function(J){J.keyCode===Oe.ESC&&P()};return o&&window.addEventListener("keydown",B),function(){window.removeEventListener("keydown",B)}},[o]);var le=function(Q,J){Q.preventDefault(),Q.stopPropagation(),j(J)},Z=n.useCallback(function(B){var Q=B.type,J=B.disabled,ie=B.onClick,ne=B.icon;return n.createElement("div",{key:Q,className:W(ae,"".concat(l,"-operations-operation-").concat(Q),fe({},"".concat(l,"-operations-operation-disabled"),!!J)),onClick:ie},ne)},[ae,l]),se=f?Z({icon:G,onClick:function(Q){return le(Q,-1)},type:"prev",disabled:m===0}):void 0,te=f?Z({icon:U,onClick:function(Q){return le(Q,1)},type:"next",disabled:m===b-1}):void 0,oe=Z({icon:ee,onClick:T,type:"flipY"}),k=Z({icon:F,onClick:y,type:"flipX"}),de=Z({icon:u,onClick:h,type:"rotateLeft"}),K=Z({icon:S,onClick:w,type:"rotateRight"}),re=Z({icon:_,onClick:g,type:"zoomOut",disabled:C<=M}),ue=Z({icon:L,onClick:N,type:"zoomIn",disabled:C===$}),D=n.createElement("div",{className:"".concat(l,"-operations")},oe,k,de,K,re,ue);return n.createElement(et,{visible:o,motionName:a},function(B){var Q=B.className,J=B.style;return n.createElement(Ct,{open:!0,getContainer:i??document.body},n.createElement("div",{className:W("".concat(l,"-operations-wrapper"),Q,c),style:E(E({},J),{},{zIndex:z})},I===null?null:n.createElement("button",{className:"".concat(l,"-close"),onClick:P},I||H),f&&n.createElement(n.Fragment,null,n.createElement("div",{className:W("".concat(l,"-switch-left"),fe({},"".concat(l,"-switch-left-disabled"),m===0)),onClick:function(ne){return le(ne,-1)}},G),n.createElement("div",{className:W("".concat(l,"-switch-right"),fe({},"".concat(l,"-switch-right-disabled"),m===b-1)),onClick:function(ne){return le(ne,1)}},U)),n.createElement("div",{className:"".concat(l,"-footer")},v&&n.createElement("div",{className:"".concat(l,"-progress")},d?d(m+1,b):n.createElement("bdi",null,"".concat(m+1," / ").concat(b))),x?x(D,E(E({icons:{prevIcon:se,nextIcon:te,flipYIcon:oe,flipXIcon:k,rotateLeftIcon:de,rotateRightIcon:K,zoomOutIcon:re,zoomInIcon:ue},actions:{onActive:j,onFlipY:T,onFlipX:y,onRotateLeft:h,onRotateRight:w,onZoomOut:g,onZoomIn:N,onReset:O,onClose:P},transform:p},r?{current:m,total:b}:{}),{},{image:A})):D)))})},De={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function yo(e,t,o,a){var i=n.useRef(null),l=n.useRef([]),c=n.useState(De),s=q(c,2),d=s[0],f=s[1],v=function(C){f(De),Ft(De,d)||a==null||a({transform:De,action:C})},m=function(C,M){i.current===null&&(l.current=[],i.current=kt(function(){f(function($){var I=$;return l.current.forEach(function(j){I=E(E({},I),j)}),i.current=null,a==null||a({transform:I,action:M}),I})})),l.current.push(E(E({},d),C))},p=function(C,M,$,I,j){var P=e.current,N=P.width,g=P.height,w=P.offsetWidth,h=P.offsetHeight,y=P.offsetLeft,T=P.offsetTop,O=C,x=d.scale*C;x>o?(x=o,O=o/d.scale):x<t&&(x=j?x:t,O=x/d.scale);var z=$??innerWidth/2,A=I??innerHeight/2,r=O-1,u=r*N*.5,S=r*g*.5,L=r*(z-d.x-y),_=r*(A-d.y-T),H=d.x-(L-u),G=d.y-(_-S);if(C<1&&x===1){var U=w*x,F=h*x,ee=Nt(),ae=ee.width,le=ee.height;U<=ae&&F<=le&&(H=0,G=0)}m({x:H,y:G,scale:x},M)};return{transform:d,resetTransform:v,updateTransform:m,dispatchZoomChange:p}}function mt(e,t,o,a){var i=t+o,l=(o-a)/2;if(o>a){if(t>0)return fe({},e,l);if(t<0&&i<a)return fe({},e,-l)}else if(t<0||i>a)return fe({},e,t<0?l:-l);return{}}function Et(e,t,o,a){var i=Nt(),l=i.width,c=i.height,s=null;return e<=l&&t<=c?s={x:0,y:0}:(e>l||t>c)&&(s=E(E({},mt("x",o,e,l)),mt("y",a,t,c))),s}var Ne=1,bo=1;function xo(e,t,o,a,i,l,c){var s=i.rotate,d=i.scale,f=i.x,v=i.y,m=n.useState(!1),p=q(m,2),b=p[0],C=p[1],M=n.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),$=function(g){!t||g.button!==0||(g.preventDefault(),g.stopPropagation(),M.current={diffX:g.pageX-f,diffY:g.pageY-v,transformX:f,transformY:v},C(!0))},I=function(g){o&&b&&l({x:g.pageX-M.current.diffX,y:g.pageY-M.current.diffY},"move")},j=function(){if(o&&b){C(!1);var g=M.current,w=g.transformX,h=g.transformY,y=f!==w&&v!==h;if(!y)return;var T=e.current.offsetWidth*d,O=e.current.offsetHeight*d,x=e.current.getBoundingClientRect(),z=x.left,A=x.top,r=s%180!==0,u=Et(r?O:T,r?T:O,z,A);u&&l(E({},u),"dragRebound")}},P=function(g){if(!(!o||g.deltaY==0)){var w=Math.abs(g.deltaY/100),h=Math.min(w,bo),y=Ne+h*a;g.deltaY>0&&(y=Ne/y),c(y,"wheel",g.clientX,g.clientY)}};return n.useEffect(function(){var N,g,w,h;if(t){w=$e(window,"mouseup",j,!1),h=$e(window,"mousemove",I,!1);try{window.top!==window.self&&(N=$e(window.top,"mouseup",j,!1),g=$e(window.top,"mousemove",I,!1))}catch{}}return function(){var y,T,O,x;(y=w)===null||y===void 0||y.remove(),(T=h)===null||T===void 0||T.remove(),(O=N)===null||O===void 0||O.remove(),(x=g)===null||x===void 0||x.remove()}},[o,b,f,v,s,t]),{isMoving:b,onMouseDown:$,onMouseMove:I,onMouseUp:j,onWheel:P}}function So(e){return new Promise(function(t){if(!e){t(!1);return}var o=document.createElement("img");o.onerror=function(){return t(!1)},o.onload=function(){return t(!0)},o.src=e})}function Pt(e){var t=e.src,o=e.isCustomPlaceholder,a=e.fallback,i=n.useState(o?"loading":"normal"),l=q(i,2),c=l[0],s=l[1],d=n.useRef(!1),f=c==="error";n.useEffect(function(){var b=!0;return So(t).then(function(C){!C&&b&&s("error")}),function(){b=!1}},[t]),n.useEffect(function(){o&&!d.current?s("loading"):f&&s("normal")},[t]);var v=function(){s("normal")},m=function(C){d.current=!1,c==="loading"&&C!==null&&C!==void 0&&C.complete&&(C.naturalWidth||C.naturalHeight)&&(d.current=!0,v())},p=f&&a?{src:a}:{onLoad:v,src:t};return[m,p,c]}function Fe(e,t){var o=e.x-t.x,a=e.y-t.y;return Math.hypot(o,a)}function Io(e,t,o,a){var i=Fe(e,o),l=Fe(t,a);if(i===0&&l===0)return[e.x,e.y];var c=i/(i+l),s=e.x+c*(t.x-e.x),d=e.y+c*(t.y-e.y);return[s,d]}function Ro(e,t,o,a,i,l,c){var s=i.rotate,d=i.scale,f=i.x,v=i.y,m=n.useState(!1),p=q(m,2),b=p[0],C=p[1],M=n.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),$=function(g){M.current=E(E({},M.current),g)},I=function(g){if(t){g.stopPropagation(),C(!0);var w=g.touches,h=w===void 0?[]:w;h.length>1?$({point1:{x:h[0].clientX,y:h[0].clientY},point2:{x:h[1].clientX,y:h[1].clientY},eventType:"touchZoom"}):$({point1:{x:h[0].clientX-f,y:h[0].clientY-v},eventType:"move"})}},j=function(g){var w=g.touches,h=w===void 0?[]:w,y=M.current,T=y.point1,O=y.point2,x=y.eventType;if(h.length>1&&x==="touchZoom"){var z={x:h[0].clientX,y:h[0].clientY},A={x:h[1].clientX,y:h[1].clientY},r=Io(T,O,z,A),u=q(r,2),S=u[0],L=u[1],_=Fe(z,A)/Fe(T,O);c(_,"touchZoom",S,L,!0),$({point1:z,point2:A,eventType:"touchZoom"})}else x==="move"&&(l({x:h[0].clientX-T.x,y:h[0].clientY-T.y},"move"),$({eventType:"move"}))},P=function(){if(o){if(b&&C(!1),$({eventType:"none"}),a>d)return l({x:0,y:0,scale:a},"touchZoom");var g=e.current.offsetWidth*d,w=e.current.offsetHeight*d,h=e.current.getBoundingClientRect(),y=h.left,T=h.top,O=s%180!==0,x=Et(O?w:g,O?g:w,y,T);x&&l(E({},x),"dragRebound")}};return n.useEffect(function(){var N;return o&&t&&(N=$e(window,"touchmove",function(g){return g.preventDefault()},{passive:!1})),function(){var g;(g=N)===null||g===void 0||g.remove()}},[o,t]),{isTouching:b,onTouchStart:I,onTouchMove:j,onTouchEnd:P}}var Mo=["fallback","src","imgRef"],$o=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],No=function(t){var o=t.fallback,a=t.src,i=t.imgRef,l=Ee(t,Mo),c=Pt({src:a,fallback:o}),s=q(c,2),d=s[0],f=s[1];return Y.createElement("img",V({ref:function(m){i.current=m,d(m)}},l,f))},Ot=function(t){var o=t.prefixCls,a=t.src,i=t.alt,l=t.imageInfo,c=t.fallback,s=t.movable,d=s===void 0?!0:s,f=t.onClose,v=t.visible,m=t.icons,p=m===void 0?{}:m,b=t.rootClassName,C=t.closeIcon,M=t.getContainer,$=t.current,I=$===void 0?0:$,j=t.count,P=j===void 0?1:j,N=t.countRender,g=t.scaleStep,w=g===void 0?.5:g,h=t.minScale,y=h===void 0?1:h,T=t.maxScale,O=T===void 0?50:T,x=t.transitionName,z=x===void 0?"zoom":x,A=t.maskTransitionName,r=A===void 0?"fade":A,u=t.imageRender,S=t.imgCommonProps,L=t.toolbarRender,_=t.onTransform,H=t.onChange,G=Ee(t,$o),U=n.useRef(),F=n.useContext(Te),ee=F&&P>1,ae=F&&P>=1,le=n.useState(!0),Z=q(le,2),se=Z[0],te=Z[1],oe=yo(U,y,O,_),k=oe.transform,de=oe.resetTransform,K=oe.updateTransform,re=oe.dispatchZoomChange,ue=xo(U,d,v,w,k,K,re),D=ue.isMoving,B=ue.onMouseDown,Q=ue.onWheel,J=Ro(U,d,v,y,k,K,re),ie=J.isTouching,ne=J.onTouchStart,pe=J.onTouchMove,xe=J.onTouchEnd,ve=k.rotate,ge=k.scale,ke=W(fe({},"".concat(o,"-moving"),D));n.useEffect(function(){se||te(!0)},[se]);var Xe=function(){de("close")},Ye=function(){re(Ne+w,"zoomIn")},Ce=function(){re(Ne/(Ne+w),"zoomOut")},we=function(){K({rotate:ve+90},"rotateRight")},je=function(){K({rotate:ve-90},"rotateLeft")},ze=function(){K({flipX:!k.flipX},"flipX")},Le=function(){K({flipY:!k.flipY},"flipY")},Lt=function(){de("reset")},We=function(ye){var Ae=I+ye;!Number.isInteger(Ae)||Ae<0||Ae>P-1||(te(!1),de(ye<0?"prev":"next"),H==null||H(Ae,I))},At=function(ye){!v||!ee||(ye.keyCode===Oe.LEFT?We(-1):ye.keyCode===Oe.RIGHT&&We(1))},_t=function(ye){v&&(ge!==1?K({x:0,y:0,scale:1},"doubleClick"):re(Ne+w,"doubleClick",ye.clientX,ye.clientY))};n.useEffect(function(){var me=$e(window,"keydown",At,!1);return function(){me.remove()}},[v,ee,I]);var ot=Y.createElement(No,V({},S,{width:t.width,height:t.height,imgRef:U,className:"".concat(o,"-img"),alt:i,style:{transform:"translate3d(".concat(k.x,"px, ").concat(k.y,"px, 0) scale3d(").concat(k.flipX?"-":"").concat(ge,", ").concat(k.flipY?"-":"").concat(ge,", 1) rotate(").concat(ve,"deg)"),transitionDuration:(!se||ie)&&"0s"},fallback:c,src:a,onWheel:Q,onMouseDown:B,onDoubleClick:_t,onTouchStart:ne,onTouchMove:pe,onTouchEnd:xe,onTouchCancel:xe})),nt=E({url:a,alt:i},l);return Y.createElement(Y.Fragment,null,Y.createElement(Mt,V({transitionName:z,maskTransitionName:r,closable:!1,keyboard:!0,prefixCls:o,onClose:f,visible:v,classNames:{wrapper:ke},rootClassName:b,getContainer:M},G,{afterClose:Xe}),Y.createElement("div",{className:"".concat(o,"-img-wrapper")},u?u(ot,E({transform:k,image:nt},F?{current:I}:{})):ot)),Y.createElement(wo,{visible:v,transform:k,maskTransitionName:r,closeIcon:C,getContainer:M,prefixCls:o,rootClassName:b,icons:p,countRender:N,showSwitch:ee,showProgress:ae,current:I,count:P,scale:ge,minScale:y,maxScale:O,toolbarRender:L,onActive:We,onZoomIn:Ye,onZoomOut:Ce,onRotateRight:we,onRotateLeft:je,onFlipX:ze,onFlipY:Le,onClose:f,onReset:Lt,zIndex:G.zIndex!==void 0?G.zIndex+1:void 0,image:nt}))},Qe=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Eo(e){var t=n.useState({}),o=q(t,2),a=o[0],i=o[1],l=n.useCallback(function(s,d){return i(function(f){return E(E({},f),{},fe({},s,d))}),function(){i(function(f){var v=E({},f);return delete v[s],v})}},[]),c=n.useMemo(function(){return e?e.map(function(s){if(typeof s=="string")return{data:{src:s}};var d={};return Object.keys(s).forEach(function(f){["src"].concat(Ze(Qe)).includes(f)&&(d[f]=s[f])}),{data:d}}):Object.keys(a).reduce(function(s,d){var f=a[d],v=f.canPreview,m=f.data;return v&&s.push({data:m,id:d}),s},[])},[e,a]);return[c,l,!!e]}var Po=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Oo=["src"],To=function(t){var o,a=t.previewPrefixCls,i=a===void 0?"rc-image-preview":a,l=t.children,c=t.icons,s=c===void 0?{}:c,d=t.items,f=t.preview,v=t.fallback,m=Be(f)==="object"?f:{},p=m.visible,b=m.onVisibleChange,C=m.getContainer,M=m.current,$=m.movable,I=m.minScale,j=m.maxScale,P=m.countRender,N=m.closeIcon,g=m.onChange,w=m.onTransform,h=m.toolbarRender,y=m.imageRender,T=Ee(m,Po),O=Eo(d),x=q(O,3),z=x[0],A=x[1],r=x[2],u=qe(0,{value:M}),S=q(u,2),L=S[0],_=S[1],H=n.useState(!1),G=q(H,2),U=G[0],F=G[1],ee=((o=z[L])===null||o===void 0?void 0:o.data)||{},ae=ee.src,le=Ee(ee,Oo),Z=qe(!!p,{value:p,onChange:function(ie,ne){b==null||b(ie,ne,L)}}),se=q(Z,2),te=se[0],oe=se[1],k=n.useState(null),de=q(k,2),K=de[0],re=de[1],ue=n.useCallback(function(J,ie,ne,pe){var xe=r?z.findIndex(function(ve){return ve.data.src===ie}):z.findIndex(function(ve){return ve.id===J});_(xe<0?0:xe),oe(!0),re({x:ne,y:pe}),F(!0)},[z,r]);n.useEffect(function(){te?U||_(0):F(!1)},[te]);var D=function(ie,ne){_(ie),g==null||g(ie,ne)},B=function(){oe(!1),re(null)},Q=n.useMemo(function(){return{register:A,onPreview:ue}},[A,ue]);return n.createElement(Te.Provider,{value:Q},l,n.createElement(Ot,V({"aria-hidden":!te,movable:$,visible:te,prefixCls:i,closeIcon:N,onClose:B,mousePosition:K,imgCommonProps:le,src:ae,fallback:v,icons:s,minScale:I,maxScale:j,getContainer:C,current:L,count:z.length,countRender:P,onTransform:w,toolbarRender:h,imageRender:y,onChange:D},T)))},ft=0;function jo(e,t){var o=n.useState(function(){return ft+=1,String(ft)}),a=q(o,1),i=a[0],l=n.useContext(Te),c={data:t,canPreview:e};return n.useEffect(function(){if(l)return l.register(i,c)},[]),n.useEffect(function(){l&&l.register(i,c)},[e,t]),i}var zo=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Lo=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],tt=function(t){var o=t.src,a=t.alt,i=t.onPreviewClose,l=t.prefixCls,c=l===void 0?"rc-image":l,s=t.previewPrefixCls,d=s===void 0?"".concat(c,"-preview"):s,f=t.placeholder,v=t.fallback,m=t.width,p=t.height,b=t.style,C=t.preview,M=C===void 0?!0:C,$=t.className,I=t.onClick,j=t.onError,P=t.wrapperClassName,N=t.wrapperStyle,g=t.rootClassName,w=Ee(t,zo),h=f&&f!==!0,y=Be(M)==="object"?M:{},T=y.src,O=y.visible,x=O===void 0?void 0:O,z=y.onVisibleChange,A=z===void 0?i:z,r=y.getContainer,u=r===void 0?void 0:r,S=y.mask,L=y.maskClassName,_=y.movable,H=y.icons,G=y.scaleStep,U=y.minScale,F=y.maxScale,ee=y.imageRender,ae=y.toolbarRender,le=Ee(y,Lo),Z=T??o,se=qe(!!x,{value:x,onChange:A}),te=q(se,2),oe=te[0],k=te[1],de=Pt({src:o,isCustomPlaceholder:h,fallback:v}),K=q(de,3),re=K[0],ue=K[1],D=K[2],B=n.useState(null),Q=q(B,2),J=Q[0],ie=Q[1],ne=n.useContext(Te),pe=!!M,xe=function(){k(!1),ie(null)},ve=W(c,P,g,fe({},"".concat(c,"-error"),D==="error")),ge=n.useMemo(function(){var Ce={};return Qe.forEach(function(we){t[we]!==void 0&&(Ce[we]=t[we])}),Ce},Qe.map(function(Ce){return t[Ce]})),ke=n.useMemo(function(){return E(E({},ge),{},{src:Z})},[Z,ge]),Xe=jo(pe,ke),Ye=function(we){var je=Co(we.target),ze=je.left,Le=je.top;ne?ne.onPreview(Xe,Z,ze,Le):(ie({x:ze,y:Le}),k(!0)),I==null||I(we)};return n.createElement(n.Fragment,null,n.createElement("div",V({},w,{className:ve,onClick:pe?Ye:I,style:E({width:m,height:p},N)}),n.createElement("img",V({},ge,{className:W("".concat(c,"-img"),fe({},"".concat(c,"-img-placeholder"),f===!0),$),style:E({height:p},b),ref:re},ue,{width:m,height:p,onError:j})),D==="loading"&&n.createElement("div",{"aria-hidden":"true",className:"".concat(c,"-placeholder")},f),S&&pe&&n.createElement("div",{className:W("".concat(c,"-mask"),L),style:{display:(b==null?void 0:b.display)==="none"?"none":void 0}},S)),!ne&&pe&&n.createElement(Ot,V({"aria-hidden":!oe,visible:oe,prefixCls:d,onClose:xe,mousePosition:J,src:Z,alt:a,imageInfo:{width:m,height:p},fallback:v,getContainer:u,icons:H,movable:_,scaleStep:G,minScale:U,maxScale:F,rootClassName:g,imageRender:ee,imgCommonProps:ge,toolbarRender:ae},le)))};tt.PreviewGroup=To;var Ao={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},_o=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:Ao}))},Do=n.forwardRef(_o),Bo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Ho=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:Bo}))},Fo=n.forwardRef(Ho),ko={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},Xo=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:ko}))},vt=n.forwardRef(Xo),Yo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Wo=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:Yo}))},Vo=n.forwardRef(Wo),Go={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},Zo=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:Go}))},qo=n.forwardRef(Zo);const Je=e=>({position:e||"absolute",inset:0}),Uo=e=>{const{iconCls:t,motionDurationSlow:o,paddingXXS:a,marginXXS:i,prefixCls:l,colorTextLightSolid:c}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:c,background:new Re("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${o}`,[`.${l}-mask-info`]:Object.assign(Object.assign({},Xt),{padding:`0 ${X(a)}`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}},Ko=e=>{const{previewCls:t,modalMaskBg:o,paddingSM:a,marginXL:i,margin:l,paddingLG:c,previewOperationColorDisabled:s,previewOperationHoverColor:d,motionDurationSlow:f,iconCls:v,colorTextLightSolid:m}=e,p=new Re(o).setA(.1),b=p.clone().setA(.2);return{[`${t}-footer`]:{position:"fixed",bottom:i,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:l},[`${t}-close`]:{position:"fixed",top:i,right:{_skip_check_:!0,value:i},display:"flex",color:m,backgroundColor:p.toRgbString(),borderRadius:"50%",padding:a,outline:0,border:0,cursor:"pointer",transition:`all ${f}`,"&:hover":{backgroundColor:b.toRgbString()},[`& > ${v}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${X(c)}`,backgroundColor:p.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:a,padding:a,cursor:"pointer",transition:`all ${f}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${v}`]:{color:d},"&-disabled":{color:s,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${v}`]:{fontSize:e.previewOperationSize}}}}},Qo=e=>{const{modalMaskBg:t,iconCls:o,previewOperationColorDisabled:a,previewCls:i,zIndexPopup:l,motionDurationSlow:c}=e,s=new Re(t).setA(.1),d=s.clone().setA(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(l).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:s.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${c}`,userSelect:"none","&:hover":{background:d.toRgbString()},"&-disabled":{"&, &:hover":{color:a,background:"transparent",cursor:"not-allowed",[`> ${o}`]:{cursor:"not-allowed"}}},[`> ${o}`]:{fontSize:e.previewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:e.marginSM},[`${i}-switch-right`]:{insetInlineEnd:e.marginSM}}},Jo=e=>{const{motionEaseOut:t,previewCls:o,motionDurationSlow:a,componentCls:i}=e;return[{[`${i}-preview-root`]:{[o]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${o}-body`]:Object.assign(Object.assign({},Je()),{overflow:"hidden"}),[`${o}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${a} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Je()),{transition:`transform ${a} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${o}-moving`]:{[`${o}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${o}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[Ko(e),Qo(e)]}]},en=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},Uo(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},Je())}}},tn=e=>{const{previewCls:t}=e;return{[`${t}-root`]:wt(e,"zoom"),"&":St(e,!0)}},on=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new Re(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new Re(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new Re(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),Tt=pt("Image",e=>{const t=`${e.componentCls}-preview`,o=Ge(e,{previewCls:t,modalMaskBg:new Re("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[en(o),Jo(o),$t(Ge(o,{componentCls:t})),tn(o)]},on);var nn=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(o[a[i]]=e[a[i]]);return o};const jt={rotateLeft:n.createElement(Do,null),rotateRight:n.createElement(Fo,null),zoomIn:n.createElement(Vo,null),zoomOut:n.createElement(qo,null),close:n.createElement(Ut,null),left:n.createElement(Ke,null),right:n.createElement(Ue,null),flipX:n.createElement(vt,null),flipY:n.createElement(vt,{rotate:90})},an=e=>{var{previewPrefixCls:t,preview:o}=e,a=nn(e,["previewPrefixCls","preview"]);const{getPrefixCls:i,direction:l}=n.useContext(Yt),c=i("image",t),s=`${c}-preview`,d=i(),f=yt(c),[v,m,p]=Tt(c,f),[b]=bt("ImagePreview",typeof o=="object"?o.zIndex:void 0),C=n.useMemo(()=>Object.assign(Object.assign({},jt),{left:l==="rtl"?n.createElement(Ue,null):n.createElement(Ke,null),right:l==="rtl"?n.createElement(Ke,null):n.createElement(Ue,null)}),[l]),M=n.useMemo(()=>{var $;if(o===!1)return o;const I=typeof o=="object"?o:{},j=W(m,p,f,($=I.rootClassName)!==null&&$!==void 0?$:"");return Object.assign(Object.assign({},I),{transitionName:He(d,"zoom",I.transitionName),maskTransitionName:He(d,"fade",I.maskTransitionName),rootClassName:j,zIndex:b})},[o,d,b,m,p,f]);return v(n.createElement(tt.PreviewGroup,Object.assign({preview:M,previewPrefixCls:s,icons:C},a)))};var gt=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(o[a[i]]=e[a[i]]);return o};const zt=e=>{const{prefixCls:t,preview:o,className:a,rootClassName:i,style:l,fallback:c}=e,s=gt(e,["prefixCls","preview","className","rootClassName","style","fallback"]),{getPrefixCls:d,getPopupContainer:f,className:v,style:m,preview:p,fallback:b}=Wt("image"),[C]=Vt("Image"),M=d("image",t),$=d(),I=yt(M),[j,P,N]=Tt(M,I),g=W(i,P,N,I),w=W(a,P,v),[h]=bt("ImagePreview",typeof o=="object"?o.zIndex:void 0),y=n.useMemo(()=>{if(o===!1)return o;const x=typeof o=="object"?o:{},{getContainer:z,closeIcon:A,rootClassName:r,destroyOnClose:u,destroyOnHidden:S}=x,L=gt(x,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:n.createElement("div",{className:`${M}-mask-info`},n.createElement(Kt,null),C==null?void 0:C.preview),icons:jt},L),{destroyOnClose:S??u,rootClassName:W(g,r),getContainer:z??f,transitionName:He($,"zoom",x.transitionName),maskTransitionName:He($,"fade",x.maskTransitionName),zIndex:h,closeIcon:A??(p==null?void 0:p.closeIcon)})},[o,C,p==null?void 0:p.closeIcon]),T=Object.assign(Object.assign({},m),l),O=c??b;return j(n.createElement(tt,Object.assign({prefixCls:M,preview:y,rootClassName:g,className:w,style:T,fallback:O},s)))};zt.PreviewGroup=an;var rn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},ln=function(t,o){return n.createElement(Pe,V({},t,{ref:o,icon:rn}))},sn=n.forwardRef(ln);const be={getAll:async e=>{const{data:t}=await he.get("/projects",{params:e});return t},getById:async e=>{const{data:t}=await he.get(`/projects/${e}`);return t},create:async e=>{const{data:t}=await he.post("/projects",e);return t},update:async(e,t)=>{const{data:o}=await he.put(`/projects/${e}`,t);return o},delete:async e=>{const{data:t}=await he.delete(`/projects/${e}`);return t},uploadImage:async(e,t)=>{const o=new FormData;o.append("image",t);const{data:a}=await he.put(`/projects/${e}/image`,o,{headers:{"Content-Type":"multipart/form-data"}});return a},deleteImage:async e=>{const{data:t}=await he.delete(`/projects/${e}/image`);return t},uploadGallery:async(e,t)=>{const{data:o}=await he.put(`/projects/${e}/gallery`,t,{headers:{"Content-Type":"multipart/form-data"}});return o},deleteGalleryImage:async(e,t)=>{const{data:o}=await he.delete(`/projects/${e}/gallery/${t}`);return o}},{TextArea:cn}=xt,Tn=()=>{var z,A;const[e,t]=n.useState(!1),[o,a]=n.useState(null),[i,l]=n.useState(""),[c]=Ie.useForm(),s=Gt(),[d,f]=n.useState(!1),[v,m]=n.useState(null),{data:p,isLoading:b}=rt({queryKey:["projects"],queryFn:()=>be.getAll({limit:100})}),{data:C}=rt({queryKey:["categories"],queryFn:()=>Qt.getAll()}),M=n.useMemo(()=>i?((p==null?void 0:p.data)||[]).filter(r=>{var u;return r.title.toLowerCase().includes(i.toLowerCase())||((u=r.description)==null?void 0:u.toLowerCase().includes(i.toLowerCase()))}):(p==null?void 0:p.data)||[],[p==null?void 0:p.data,i]),$=Se({mutationFn:r=>be.create(r),onSuccess:()=>{ce.success("Ish yaratildi!"),s.invalidateQueries({queryKey:["projects"]}),y()},onError:r=>{var S,L,_,H;console.error("Create Project Error:",r);const u=((L=(S=r.response)==null?void 0:S.data)==null?void 0:L.error)||((H=(_=r.response)==null?void 0:_.data)==null?void 0:H.message)||r.message||"Noma'lum xatolik";ce.error(u)}}),I=Se({mutationFn:({id:r,data:u})=>be.update(r,u),onSuccess:()=>{ce.success("Ish yangilandi!"),s.invalidateQueries({queryKey:["projects"]}),y()},onError:r=>{var S,L,_,H;console.error("Update Project Error:",r);const u=((L=(S=r.response)==null?void 0:S.data)==null?void 0:L.error)||((H=(_=r.response)==null?void 0:_.data)==null?void 0:H.message)||r.message||"Noma'lum xatolik";ce.error(u)}}),j=Se({mutationFn:r=>be.delete(r),onSuccess:()=>{ce.success("Ish o'chirildi!"),s.invalidateQueries({queryKey:["projects"]})},onError:()=>ce.error("Xatolik yuz berdi")}),P=Se({mutationFn:({id:r,file:u})=>be.uploadImage(r,u),onSuccess:r=>{ce.success("Rasm yuklandi!"),s.invalidateQueries({queryKey:["projects"]}),a(u=>{var S;return u&&{...u,image:(S=r.data)==null?void 0:S.image}})},onError:()=>ce.error("Rasm yuklashda xatolik")}),N=Se({mutationFn:r=>be.deleteImage(r),onSuccess:()=>{ce.success("Rasm o'chirildi!"),s.invalidateQueries({queryKey:["projects"]}),a(r=>r&&{...r,image:void 0})},onError:()=>ce.error("Rasm o'chirishda xatolik")}),g=Se({mutationFn:({id:r,file:u})=>{const S=new FormData;return S.append("image",u),be.uploadGallery(r,S)},onSuccess:r=>{ce.success("Rasm yuklandi"),s.invalidateQueries({queryKey:["projects"]}),m(u=>{var S;return u&&{...u,gallery:((S=r.data)==null?void 0:S.gallery)||u.gallery}})},onError:()=>ce.error("Rasm yuklashda xatolik")}),w=Se({mutationFn:({id:r,index:u})=>be.deleteGalleryImage(r,u),onSuccess:(r,u)=>{ce.success("Rasm o'chirildi"),s.invalidateQueries({queryKey:["projects"]}),m(S=>S&&{...S,gallery:(S.gallery||[]).filter((L,_)=>_!==u.index)})},onError:()=>ce.error("O'chirishda xatolik")}),h=r=>{var u;r?(a(r),c.setFieldsValue({...r,categoryId:typeof r.category=="object"?(u=r.category)==null?void 0:u.id:r.categoryId})):(a(null),c.resetFields()),t(!0)},y=()=>{t(!1),a(null),c.resetFields()},T=async r=>{const{image:u,...S}=r,L={...S,categoryId:r.categoryId};o?I.mutate({id:o.id,data:L}):$.mutate(L)},O=r=>{if(r){if(typeof r=="string")return r;if(typeof r=="object"&&r.url)return r.url}},x=[{title:"Rasm",dataIndex:"image",key:"image",width:60,render:r=>{const u=O(r);return u?R.jsx("img",{src:u,alt:"",style:{width:40,height:40,objectFit:"cover",borderRadius:6}}):"-"}},{title:"Nomi",dataIndex:"title",key:"title",sorter:(r,u)=>r.title.localeCompare(u.title),render:r=>R.jsx("strong",{children:r})},{title:"Kategoriya",dataIndex:"category",key:"category",render:r=>R.jsx(Ve,{color:"blue",children:typeof r=="object"?r.name:r})},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Published",value:"published"},{text:"Draft",value:"draft"},{text:"Archived",value:"archived"}],onFilter:(r,u)=>u.status===r,render:r=>R.jsx(Ve,{color:r==="published"?"green":r==="draft"?"orange":"default",children:r})},{title:"Featured",dataIndex:"isFeatured",key:"isFeatured",filters:[{text:"Featured",value:!0},{text:"Regular",value:!1}],onFilter:(r,u)=>u.isFeatured===r,render:r=>r?R.jsx(Ve,{color:"gold",children:"Featured"}):"-"},{title:"Ko'rishlar",dataIndex:"views",key:"views",sorter:(r,u)=>(r.views||0)-(u.views||0)},{title:"Amallar",key:"actions",width:120,render:(r,u)=>R.jsx(eo,{onView:()=>{m(u),f(!0)},viewIcon:R.jsx(sn,{}),onEdit:()=>h(u),onDelete:()=>j.mutate(u.id),deleteLoading:j.isPending})}];return R.jsxs(R.Fragment,{children:[R.jsx(to,{title:"Amaliyotlar (Keyslar)",onAdd:()=>h(),addButtonText:"Yangi amaliyot",onSearch:l,searchPlaceholder:"Amaliyotlarni qidirish...",children:R.jsx(oo,{columns:x,dataSource:M,rowKey:"id",loading:b,pagination:{pageSize:10,showSizeChanger:!0,showTotal:r=>`Jami: ${r}`},size:"middle"})}),R.jsxs(Jt,{open:e,onClose:y,title:o?"Amaliyotni tahrirlash":"Yangi amaliyot",loading:$.isPending||I.isPending,form:c,onSubmit:T,isEdit:!!o,width:500,children:[R.jsx(Ie.Item,{name:"title",label:"Nomi",rules:[{required:!0}],children:R.jsx(xt,{placeholder:"Ish nomi"})}),R.jsx(Ie.Item,{name:"description",label:"Tavsif",rules:[{required:!0}],children:R.jsx(cn,{rows:3,placeholder:"Ish tavsifi"})}),R.jsx(Ie.Item,{name:"categoryId",label:"Kategoriya",rules:[{required:!0,message:"Kategoriyani tanlang"}],children:R.jsx(Me,{placeholder:"Kategoriya tanlang",children:(z=C==null?void 0:C.data)==null?void 0:z.map(r=>R.jsx(Me.Option,{value:r.id,children:r.name},r.id))})}),o&&R.jsx(Ie.Item,{label:"Rasm",children:R.jsxs("div",{className:"space-y-2",children:[O(o.image)&&R.jsxs("div",{className:"relative",children:[R.jsx("img",{src:O(o.image),alt:"Preview",style:{width:"100%",height:160,objectFit:"cover",borderRadius:8}}),R.jsx(_e,{danger:!0,size:"small",icon:R.jsx(it,{}),onClick:()=>N.mutate(o.id),loading:N.isPending,style:{position:"absolute",top:8,right:8}})]}),R.jsx(lt,{showUploadList:!1,accept:"image/*",beforeUpload:r=>(P.mutate({id:o.id,file:r}),!1),children:R.jsx(_e,{icon:R.jsx(st,{}),loading:P.isPending,children:"Rasm yuklash"})})]})}),R.jsx(Ie.Item,{name:"status",label:"Status",initialValue:"published",children:R.jsxs(Me,{children:[R.jsx(Me.Option,{value:"draft",children:"Draft"}),R.jsx(Me.Option,{value:"published",children:"Published"}),R.jsx(Me.Option,{value:"archived",children:"Archived"})]})}),R.jsx(Ie.Item,{name:"isFeatured",label:"Featured",valuePropName:"checked",children:R.jsx(no,{})})]}),R.jsxs(ao,{title:`${v==null?void 0:v.title} â€” Galereya`,open:d,onClose:()=>{f(!1),m(null)},width:600,children:[R.jsx("div",{className:"mb-4",children:R.jsx(lt,{showUploadList:!1,beforeUpload:r=>(v&&g.mutate({id:v.id,file:r}),!1),accept:"image/*",children:R.jsx(_e,{icon:R.jsx(st,{}),loading:g.isPending,children:"Rasm qo'shish"})})}),R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(A=v==null?void 0:v.gallery)==null?void 0:A.map((r,u)=>{const S=O(r);return S?R.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[R.jsx(zt,{src:S,alt:`Gallery ${u}`,className:"object-cover w-full h-40",width:"100%",height:160}),R.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:R.jsx(_e,{danger:!0,size:"small",icon:R.jsx(it,{}),onClick:()=>{v&&w.mutate({id:v.id,index:u})},loading:w.isPending})})]},u):null}),(!(v!=null&&v.gallery)||v.gallery.length===0)&&R.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400 border-dashed border-2 rounded-lg",children:"Rasmlar yo'q"})]})]})]})};export{Tn as default};
