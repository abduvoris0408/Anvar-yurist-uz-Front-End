import{r as n,H as W,J as Dt,M as E,c as V,N as Be,p as ht,_ as G,P as q,q as et,Q as at,S as Oe,g as pt,m as Ge,u as Y,a as Bt,b as Ht,f as Ze,T as fe,U as Ft,V as kt,W as Ee,X as qe,I as Pe,Y as Re,Z as Xt,$ as Ue,C as Yt,a0 as He,e as Wt,a1 as Vt,G as Gt,k as R,B as _e}from"./index-isBeRo1b.js";import{u as rt}from"./useClosable-Dwegbn33.js";import{u as Se,s as ce}from"./index-DOY2cXOq.js";import{u as Zt,P as Ct,d as wt,e as qt,a as Ut,f as yt,h as bt,R as Kt,c as he}from"./client-D49sAvGJ.js";import{c as Qt}from"./categories--hKE1BeI.js";import{C as Jt}from"./CrudDrawer-CCohrQdE.js";import{A as eo}from"./ActionButtons-MGrXOT8T.js";import{P as to}from"./PageHeader-CzhsRgKs.js";import{u as oo}from"./useDebounce-D60A3ZKm.js";import{F as Ie}from"./index-CO1TAYVF.js";import{a as $e,F as no}from"./Table-CbaHfp0x.js";import{I as xt}from"./index-BiEyZbEs.js";import{S as Me}from"./index-DeMcSX5K.js";import{R as it}from"./DeleteOutlined-BdlBkdV1.js";import{i as St,U as lt,R as st}from"./UploadOutlined-C9sZaBMJ.js";import{S as ao}from"./index-Aatx205e.js";import{D as ro}from"./index-CK1P3WPV.js";import{R as Ke}from"./index-Dh7qLhW3.js";import{T as Ve}from"./index-CDKBTdtS.js";import"./InfoCircleFilled-Ko0Gchp7.js";import"./index-CUCRgLKV.js";import"./QuestionCircleOutlined-DwuYyw29.js";import"./DownOutlined-C7Jp90Yl.js";var It=n.createContext({});function ct(e,t,o){var a=t;return!a&&o&&(a="".concat(e,"-").concat(o)),a}function dt(e,t){var o=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof o!="number"){var i=e.document;o=i.documentElement[a],typeof o!="number"&&(o=i.body[a])}return o}function io(e){var t=e.getBoundingClientRect(),o={left:t.left,top:t.top},a=e.ownerDocument,i=a.defaultView||a.parentWindow;return o.left+=dt(i),o.top+=dt(i,!0),o}const lo=n.memo(function(e){var t=e.children;return t},function(e,t){var o=t.shouldUpdate;return!o});var so={width:0,height:0,overflow:"hidden",outline:"none"},co={outline:"none"},uo=W.forwardRef(function(e,t){var o=e.prefixCls,a=e.className,i=e.style,l=e.title,d=e.ariaId,c=e.footer,s=e.closable,f=e.closeIcon,h=e.onClose,u=e.children,p=e.bodyStyle,C=e.bodyProps,x=e.modalRender,M=e.onMouseDown,$=e.onMouseUp,S=e.holderRef,z=e.visible,O=e.forceRender,N=e.width,v=e.height,y=e.classNames,g=e.styles,b=W.useContext(It),P=b.panel,T=Dt(S,P),w=n.useRef(),L=n.useRef();W.useImperativeHandle(t,function(){return{focus:function(){var k;(k=w.current)===null||k===void 0||k.focus({preventScroll:!0})},changeActive:function(k){var ee=document,ae=ee.activeElement;k&&ae===L.current?w.current.focus({preventScroll:!0}):!k&&ae===w.current&&L.current.focus({preventScroll:!0})}}});var A={};N!==void 0&&(A.width=N),v!==void 0&&(A.height=v);var j=c?W.createElement("div",{className:V("".concat(o,"-footer"),y==null?void 0:y.footer),style:E({},g==null?void 0:g.footer)},c):null,r=l?W.createElement("div",{className:V("".concat(o,"-header"),y==null?void 0:y.header),style:E({},g==null?void 0:g.header)},W.createElement("div",{className:"".concat(o,"-title"),id:d},l)):null,m=n.useMemo(function(){return Be(s)==="object"&&s!==null?s:s?{closeIcon:f??W.createElement("span",{className:"".concat(o,"-close-x")})}:{}},[s,f,o]),I=ht(m,!0),_=Be(s)==="object"&&s.disabled,H=s?W.createElement("button",G({type:"button",onClick:h,"aria-label":"Close"},I,{className:"".concat(o,"-close"),disabled:_}),m.closeIcon):null,B=W.createElement("div",{className:V("".concat(o,"-content"),y==null?void 0:y.content),style:g==null?void 0:g.content},H,r,W.createElement("div",G({className:V("".concat(o,"-body"),y==null?void 0:y.body),style:E(E({},p),g==null?void 0:g.body)},C),u),j);return W.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":l?d:null,"aria-modal":"true",ref:T,style:E(E({},i),A),className:V(o,a),onMouseDown:M,onMouseUp:$},W.createElement("div",{ref:w,tabIndex:0,style:co},W.createElement(lo,{shouldUpdate:z||O},x?x(B):B)),W.createElement("div",{tabIndex:0,ref:L,style:so}))}),Rt=n.forwardRef(function(e,t){var o=e.prefixCls,a=e.title,i=e.style,l=e.className,d=e.visible,c=e.forceRender,s=e.destroyOnClose,f=e.motionName,h=e.ariaId,u=e.onVisibleChanged,p=e.mousePosition,C=n.useRef(),x=n.useState(),M=q(x,2),$=M[0],S=M[1],z={};$&&(z.transformOrigin=$);function O(){var N=io(C.current);S(p&&(p.x||p.y)?"".concat(p.x-N.left,"px ").concat(p.y-N.top,"px"):"")}return n.createElement(et,{visible:d,onVisibleChanged:u,onAppearPrepare:O,onEnterPrepare:O,forceRender:c,motionName:f,removeOnLeave:s,ref:C},function(N,v){var y=N.className,g=N.style;return n.createElement(uo,G({},e,{ref:t,title:a,ariaId:h,prefixCls:o,holderRef:v,style:E(E(E({},g),i),z),className:V(l,y)}))})});Rt.displayName="Content";var mo=function(t){var o=t.prefixCls,a=t.style,i=t.visible,l=t.maskProps,d=t.motionName,c=t.className;return n.createElement(et,{key:"mask",visible:i,motionName:d,leavedClassName:"".concat(o,"-mask-hidden")},function(s,f){var h=s.className,u=s.style;return n.createElement("div",G({ref:f,style:E(E({},u),a),className:V("".concat(o,"-mask"),h,c)},l))})},fo=function(t){var o=t.prefixCls,a=o===void 0?"rc-dialog":o,i=t.zIndex,l=t.visible,d=l===void 0?!1:l,c=t.keyboard,s=c===void 0?!0:c,f=t.focusTriggerAfterClose,h=f===void 0?!0:f,u=t.wrapStyle,p=t.wrapClassName,C=t.wrapProps,x=t.onClose,M=t.afterOpenChange,$=t.afterClose,S=t.transitionName,z=t.animation,O=t.closable,N=O===void 0?!0:O,v=t.mask,y=v===void 0?!0:v,g=t.maskTransitionName,b=t.maskAnimation,P=t.maskClosable,T=P===void 0?!0:P,w=t.maskStyle,L=t.maskProps,A=t.rootClassName,j=t.classNames,r=t.styles,m=n.useRef(),I=n.useRef(),_=n.useRef(),H=n.useState(d),B=q(H,2),U=B[0],k=B[1],ee=Zt();function ae(){at(I.current,document.activeElement)||(m.current=document.activeElement)}function le(){if(!at(I.current,document.activeElement)){var D;(D=_.current)===null||D===void 0||D.focus()}}function Z(D){if(D)le();else{if(k(!1),y&&m.current&&h){try{m.current.focus({preventScroll:!0})}catch{}m.current=null}U&&($==null||$())}M==null||M(D)}function se(D){x==null||x(D)}var te=n.useRef(!1),oe=n.useRef(),X=function(){clearTimeout(oe.current),te.current=!0},de=function(){oe.current=setTimeout(function(){te.current=!1})},K=null;T&&(K=function(F){te.current?te.current=!1:I.current===F.target&&se(F)});function re(D){if(s&&D.keyCode===Oe.ESC){D.stopPropagation(),se(D);return}d&&D.keyCode===Oe.TAB&&_.current.changeActive(!D.shiftKey)}n.useEffect(function(){d&&(k(!0),ae())},[d]),n.useEffect(function(){return function(){clearTimeout(oe.current)}},[]);var ue=E(E(E({zIndex:i},u),r==null?void 0:r.wrapper),{},{display:U?null:"none"});return n.createElement("div",G({className:V("".concat(a,"-root"),A)},ht(t,{data:!0})),n.createElement(mo,{prefixCls:a,visible:y&&d,motionName:ct(a,g,b),style:E(E({zIndex:i},w),r==null?void 0:r.mask),maskProps:L,className:j==null?void 0:j.mask}),n.createElement("div",G({tabIndex:-1,onKeyDown:re,className:V("".concat(a,"-wrap"),p,j==null?void 0:j.wrapper),ref:I,onClick:K,style:ue},C),n.createElement(Rt,G({},t,{onMouseDown:X,onMouseUp:de,ref:_,closable:N,ariaId:ee,prefixCls:a,visible:d&&U,onClose:se,onVisibleChanged:Z,motionName:ct(a,S,z)}))))},Mt=function(t){var o=t.visible,a=t.getContainer,i=t.forceRender,l=t.destroyOnClose,d=l===void 0?!1:l,c=t.afterClose,s=t.panelRef,f=n.useState(o),h=q(f,2),u=h[0],p=h[1],C=n.useMemo(function(){return{panel:s}},[s]);return n.useEffect(function(){o&&p(!0)},[o]),!i&&d&&!u?null:n.createElement(It.Provider,{value:C},n.createElement(Ct,{open:o||i||u,autoDestroy:!1,getContainer:a,autoLock:o||u},n.createElement(fo,G({},t,{destroyOnClose:d,afterClose:function(){c==null||c(),p(!1)}}))))};Mt.displayName="Dialog";function ut(e){return{position:e,inset:0}}const $t=e=>{const{componentCls:t,antCls:o}=e;return[{[`${t}-root`]:{[`${t}${o}-zoom-enter, ${t}${o}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${o}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},ut("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},ut("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:St(e)}]},vo=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${Y(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},Bt(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Y(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:Y(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},Ht(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${Y(e.borderRadiusLG)} ${Y(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${Y(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},go=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},ho=e=>{const{componentCls:t}=e,o=qt(e),a=Object.assign({},o);delete a.xs;const i=`--${t.replace(".","")}-`,l=Object.keys(a).map(d=>({[`@media (min-width: ${Y(a[d])})`]:{width:`var(${i}${d}-width)`}}));return{[`${t}-root`]:{[t]:[].concat(Ze(Object.keys(o).map((d,c)=>{const s=Object.keys(o)[c-1];return s?{[`${i}${d}-width`]:`var(${i}${s}-width)`}:null})),[{width:`var(${i}xs-width)`}],Ze(l))}}},po=e=>{const t=e.padding,o=e.fontSizeHeading5,a=e.lineHeightHeading5;return Ge(e,{modalHeaderHeight:e.calc(e.calc(a).mul(o).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},Co=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${Y(e.paddingMD)} ${Y(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${Y(e.padding)} ${Y(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${Y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${Y(e.paddingXS)} ${Y(e.padding)}`:0,footerBorderTop:e.wireframe?`${Y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${Y(e.borderRadiusLG)} ${Y(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${Y(e.padding*2)} ${Y(e.padding*2)} ${Y(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM});pt("Modal",e=>{const t=po(e);return[vo(t),go(t),$t(t),wt(t,"zoom"),ho(t)]},Co,{unitless:{titleLineHeight:!0}});function Nt(){var e=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:e,height:t}}function wo(e){var t=e.getBoundingClientRect(),o=document.documentElement;return{left:t.left+(window.pageXOffset||o.scrollLeft)-(o.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||o.scrollTop)-(o.clientTop||document.body.clientTop||0)}}var Te=n.createContext(null),yo=function(t){var o=t.visible,a=t.maskTransitionName,i=t.getContainer,l=t.prefixCls,d=t.rootClassName,c=t.icons,s=t.countRender,f=t.showSwitch,h=t.showProgress,u=t.current,p=t.transform,C=t.count,x=t.scale,M=t.minScale,$=t.maxScale,S=t.closeIcon,z=t.onActive,O=t.onClose,N=t.onZoomIn,v=t.onZoomOut,y=t.onRotateRight,g=t.onRotateLeft,b=t.onFlipX,P=t.onFlipY,T=t.onReset,w=t.toolbarRender,L=t.zIndex,A=t.image,j=n.useContext(Te),r=c.rotateLeft,m=c.rotateRight,I=c.zoomIn,_=c.zoomOut,H=c.close,B=c.left,U=c.right,k=c.flipX,ee=c.flipY,ae="".concat(l,"-operations-operation");n.useEffect(function(){var F=function(J){J.keyCode===Oe.ESC&&O()};return o&&window.addEventListener("keydown",F),function(){window.removeEventListener("keydown",F)}},[o]);var le=function(Q,J){Q.preventDefault(),Q.stopPropagation(),z(J)},Z=n.useCallback(function(F){var Q=F.type,J=F.disabled,ie=F.onClick,ne=F.icon;return n.createElement("div",{key:Q,className:V(ae,"".concat(l,"-operations-operation-").concat(Q),fe({},"".concat(l,"-operations-operation-disabled"),!!J)),onClick:ie},ne)},[ae,l]),se=f?Z({icon:B,onClick:function(Q){return le(Q,-1)},type:"prev",disabled:u===0}):void 0,te=f?Z({icon:U,onClick:function(Q){return le(Q,1)},type:"next",disabled:u===C-1}):void 0,oe=Z({icon:ee,onClick:P,type:"flipY"}),X=Z({icon:k,onClick:b,type:"flipX"}),de=Z({icon:r,onClick:g,type:"rotateLeft"}),K=Z({icon:m,onClick:y,type:"rotateRight"}),re=Z({icon:_,onClick:v,type:"zoomOut",disabled:x<=M}),ue=Z({icon:I,onClick:N,type:"zoomIn",disabled:x===$}),D=n.createElement("div",{className:"".concat(l,"-operations")},oe,X,de,K,re,ue);return n.createElement(et,{visible:o,motionName:a},function(F){var Q=F.className,J=F.style;return n.createElement(Ct,{open:!0,getContainer:i??document.body},n.createElement("div",{className:V("".concat(l,"-operations-wrapper"),Q,d),style:E(E({},J),{},{zIndex:L})},S===null?null:n.createElement("button",{className:"".concat(l,"-close"),onClick:O},S||H),f&&n.createElement(n.Fragment,null,n.createElement("div",{className:V("".concat(l,"-switch-left"),fe({},"".concat(l,"-switch-left-disabled"),u===0)),onClick:function(ne){return le(ne,-1)}},B),n.createElement("div",{className:V("".concat(l,"-switch-right"),fe({},"".concat(l,"-switch-right-disabled"),u===C-1)),onClick:function(ne){return le(ne,1)}},U)),n.createElement("div",{className:"".concat(l,"-footer")},h&&n.createElement("div",{className:"".concat(l,"-progress")},s?s(u+1,C):n.createElement("bdi",null,"".concat(u+1," / ").concat(C))),w?w(D,E(E({icons:{prevIcon:se,nextIcon:te,flipYIcon:oe,flipXIcon:X,rotateLeftIcon:de,rotateRightIcon:K,zoomOutIcon:re,zoomInIcon:ue},actions:{onActive:z,onFlipY:P,onFlipX:b,onRotateLeft:g,onRotateRight:y,onZoomOut:v,onZoomIn:N,onReset:T,onClose:O},transform:p},j?{current:u,total:C}:{}),{},{image:A})):D)))})},De={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function bo(e,t,o,a){var i=n.useRef(null),l=n.useRef([]),d=n.useState(De),c=q(d,2),s=c[0],f=c[1],h=function(x){f(De),Ft(De,s)||a==null||a({transform:De,action:x})},u=function(x,M){i.current===null&&(l.current=[],i.current=kt(function(){f(function($){var S=$;return l.current.forEach(function(z){S=E(E({},S),z)}),i.current=null,a==null||a({transform:S,action:M}),S})})),l.current.push(E(E({},s),x))},p=function(x,M,$,S,z){var O=e.current,N=O.width,v=O.height,y=O.offsetWidth,g=O.offsetHeight,b=O.offsetLeft,P=O.offsetTop,T=x,w=s.scale*x;w>o?(w=o,T=o/s.scale):w<t&&(w=z?w:t,T=w/s.scale);var L=$??innerWidth/2,A=S??innerHeight/2,j=T-1,r=j*N*.5,m=j*v*.5,I=j*(L-s.x-b),_=j*(A-s.y-P),H=s.x-(I-r),B=s.y-(_-m);if(x<1&&w===1){var U=y*w,k=g*w,ee=Nt(),ae=ee.width,le=ee.height;U<=ae&&k<=le&&(H=0,B=0)}u({x:H,y:B,scale:w},M)};return{transform:s,resetTransform:h,updateTransform:u,dispatchZoomChange:p}}function mt(e,t,o,a){var i=t+o,l=(o-a)/2;if(o>a){if(t>0)return fe({},e,l);if(t<0&&i<a)return fe({},e,-l)}else if(t<0||i>a)return fe({},e,t<0?l:-l);return{}}function Et(e,t,o,a){var i=Nt(),l=i.width,d=i.height,c=null;return e<=l&&t<=d?c={x:0,y:0}:(e>l||t>d)&&(c=E(E({},mt("x",o,e,l)),mt("y",a,t,d))),c}var Ne=1,xo=1;function So(e,t,o,a,i,l,d){var c=i.rotate,s=i.scale,f=i.x,h=i.y,u=n.useState(!1),p=q(u,2),C=p[0],x=p[1],M=n.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),$=function(v){!t||v.button!==0||(v.preventDefault(),v.stopPropagation(),M.current={diffX:v.pageX-f,diffY:v.pageY-h,transformX:f,transformY:h},x(!0))},S=function(v){o&&C&&l({x:v.pageX-M.current.diffX,y:v.pageY-M.current.diffY},"move")},z=function(){if(o&&C){x(!1);var v=M.current,y=v.transformX,g=v.transformY,b=f!==y&&h!==g;if(!b)return;var P=e.current.offsetWidth*s,T=e.current.offsetHeight*s,w=e.current.getBoundingClientRect(),L=w.left,A=w.top,j=c%180!==0,r=Et(j?T:P,j?P:T,L,A);r&&l(E({},r),"dragRebound")}},O=function(v){if(!(!o||v.deltaY==0)){var y=Math.abs(v.deltaY/100),g=Math.min(y,xo),b=Ne+g*a;v.deltaY>0&&(b=Ne/b),d(b,"wheel",v.clientX,v.clientY)}};return n.useEffect(function(){var N,v,y,g;if(t){y=$e(window,"mouseup",z,!1),g=$e(window,"mousemove",S,!1);try{window.top!==window.self&&(N=$e(window.top,"mouseup",z,!1),v=$e(window.top,"mousemove",S,!1))}catch{}}return function(){var b,P,T,w;(b=y)===null||b===void 0||b.remove(),(P=g)===null||P===void 0||P.remove(),(T=N)===null||T===void 0||T.remove(),(w=v)===null||w===void 0||w.remove()}},[o,C,f,h,c,t]),{isMoving:C,onMouseDown:$,onMouseMove:S,onMouseUp:z,onWheel:O}}function Io(e){return new Promise(function(t){if(!e){t(!1);return}var o=document.createElement("img");o.onerror=function(){return t(!1)},o.onload=function(){return t(!0)},o.src=e})}function Pt(e){var t=e.src,o=e.isCustomPlaceholder,a=e.fallback,i=n.useState(o?"loading":"normal"),l=q(i,2),d=l[0],c=l[1],s=n.useRef(!1),f=d==="error";n.useEffect(function(){var C=!0;return Io(t).then(function(x){!x&&C&&c("error")}),function(){C=!1}},[t]),n.useEffect(function(){o&&!s.current?c("loading"):f&&c("normal")},[t]);var h=function(){c("normal")},u=function(x){s.current=!1,d==="loading"&&x!==null&&x!==void 0&&x.complete&&(x.naturalWidth||x.naturalHeight)&&(s.current=!0,h())},p=f&&a?{src:a}:{onLoad:h,src:t};return[u,p,d]}function Fe(e,t){var o=e.x-t.x,a=e.y-t.y;return Math.hypot(o,a)}function Ro(e,t,o,a){var i=Fe(e,o),l=Fe(t,a);if(i===0&&l===0)return[e.x,e.y];var d=i/(i+l),c=e.x+d*(t.x-e.x),s=e.y+d*(t.y-e.y);return[c,s]}function Mo(e,t,o,a,i,l,d){var c=i.rotate,s=i.scale,f=i.x,h=i.y,u=n.useState(!1),p=q(u,2),C=p[0],x=p[1],M=n.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),$=function(v){M.current=E(E({},M.current),v)},S=function(v){if(t){v.stopPropagation(),x(!0);var y=v.touches,g=y===void 0?[]:y;g.length>1?$({point1:{x:g[0].clientX,y:g[0].clientY},point2:{x:g[1].clientX,y:g[1].clientY},eventType:"touchZoom"}):$({point1:{x:g[0].clientX-f,y:g[0].clientY-h},eventType:"move"})}},z=function(v){var y=v.touches,g=y===void 0?[]:y,b=M.current,P=b.point1,T=b.point2,w=b.eventType;if(g.length>1&&w==="touchZoom"){var L={x:g[0].clientX,y:g[0].clientY},A={x:g[1].clientX,y:g[1].clientY},j=Ro(P,T,L,A),r=q(j,2),m=r[0],I=r[1],_=Fe(L,A)/Fe(P,T);d(_,"touchZoom",m,I,!0),$({point1:L,point2:A,eventType:"touchZoom"})}else w==="move"&&(l({x:g[0].clientX-P.x,y:g[0].clientY-P.y},"move"),$({eventType:"move"}))},O=function(){if(o){if(C&&x(!1),$({eventType:"none"}),a>s)return l({x:0,y:0,scale:a},"touchZoom");var v=e.current.offsetWidth*s,y=e.current.offsetHeight*s,g=e.current.getBoundingClientRect(),b=g.left,P=g.top,T=c%180!==0,w=Et(T?y:v,T?v:y,b,P);w&&l(E({},w),"dragRebound")}};return n.useEffect(function(){var N;return o&&t&&(N=$e(window,"touchmove",function(v){return v.preventDefault()},{passive:!1})),function(){var v;(v=N)===null||v===void 0||v.remove()}},[o,t]),{isTouching:C,onTouchStart:S,onTouchMove:z,onTouchEnd:O}}var $o=["fallback","src","imgRef"],No=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],Eo=function(t){var o=t.fallback,a=t.src,i=t.imgRef,l=Ee(t,$o),d=Pt({src:a,fallback:o}),c=q(d,2),s=c[0],f=c[1];return W.createElement("img",G({ref:function(u){i.current=u,s(u)}},l,f))},Ot=function(t){var o=t.prefixCls,a=t.src,i=t.alt,l=t.imageInfo,d=t.fallback,c=t.movable,s=c===void 0?!0:c,f=t.onClose,h=t.visible,u=t.icons,p=u===void 0?{}:u,C=t.rootClassName,x=t.closeIcon,M=t.getContainer,$=t.current,S=$===void 0?0:$,z=t.count,O=z===void 0?1:z,N=t.countRender,v=t.scaleStep,y=v===void 0?.5:v,g=t.minScale,b=g===void 0?1:g,P=t.maxScale,T=P===void 0?50:P,w=t.transitionName,L=w===void 0?"zoom":w,A=t.maskTransitionName,j=A===void 0?"fade":A,r=t.imageRender,m=t.imgCommonProps,I=t.toolbarRender,_=t.onTransform,H=t.onChange,B=Ee(t,No),U=n.useRef(),k=n.useContext(Te),ee=k&&O>1,ae=k&&O>=1,le=n.useState(!0),Z=q(le,2),se=Z[0],te=Z[1],oe=bo(U,b,T,_),X=oe.transform,de=oe.resetTransform,K=oe.updateTransform,re=oe.dispatchZoomChange,ue=So(U,s,h,y,X,K,re),D=ue.isMoving,F=ue.onMouseDown,Q=ue.onWheel,J=Mo(U,s,h,b,X,K,re),ie=J.isTouching,ne=J.onTouchStart,pe=J.onTouchMove,xe=J.onTouchEnd,ve=X.rotate,ge=X.scale,ke=V(fe({},"".concat(o,"-moving"),D));n.useEffect(function(){se||te(!0)},[se]);var Xe=function(){de("close")},Ye=function(){re(Ne+y,"zoomIn")},Ce=function(){re(Ne/(Ne+y),"zoomOut")},we=function(){K({rotate:ve+90},"rotateRight")},je=function(){K({rotate:ve-90},"rotateLeft")},ze=function(){K({flipX:!X.flipX},"flipX")},Le=function(){K({flipY:!X.flipY},"flipY")},Lt=function(){de("reset")},We=function(ye){var Ae=S+ye;!Number.isInteger(Ae)||Ae<0||Ae>O-1||(te(!1),de(ye<0?"prev":"next"),H==null||H(Ae,S))},At=function(ye){!h||!ee||(ye.keyCode===Oe.LEFT?We(-1):ye.keyCode===Oe.RIGHT&&We(1))},_t=function(ye){h&&(ge!==1?K({x:0,y:0,scale:1},"doubleClick"):re(Ne+y,"doubleClick",ye.clientX,ye.clientY))};n.useEffect(function(){var me=$e(window,"keydown",At,!1);return function(){me.remove()}},[h,ee,S]);var ot=W.createElement(Eo,G({},m,{width:t.width,height:t.height,imgRef:U,className:"".concat(o,"-img"),alt:i,style:{transform:"translate3d(".concat(X.x,"px, ").concat(X.y,"px, 0) scale3d(").concat(X.flipX?"-":"").concat(ge,", ").concat(X.flipY?"-":"").concat(ge,", 1) rotate(").concat(ve,"deg)"),transitionDuration:(!se||ie)&&"0s"},fallback:d,src:a,onWheel:Q,onMouseDown:F,onDoubleClick:_t,onTouchStart:ne,onTouchMove:pe,onTouchEnd:xe,onTouchCancel:xe})),nt=E({url:a,alt:i},l);return W.createElement(W.Fragment,null,W.createElement(Mt,G({transitionName:L,maskTransitionName:j,closable:!1,keyboard:!0,prefixCls:o,onClose:f,visible:h,classNames:{wrapper:ke},rootClassName:C,getContainer:M},B,{afterClose:Xe}),W.createElement("div",{className:"".concat(o,"-img-wrapper")},r?r(ot,E({transform:X,image:nt},k?{current:S}:{})):ot)),W.createElement(yo,{visible:h,transform:X,maskTransitionName:j,closeIcon:x,getContainer:M,prefixCls:o,rootClassName:C,icons:p,countRender:N,showSwitch:ee,showProgress:ae,current:S,count:O,scale:ge,minScale:b,maxScale:T,toolbarRender:I,onActive:We,onZoomIn:Ye,onZoomOut:Ce,onRotateRight:we,onRotateLeft:je,onFlipX:ze,onFlipY:Le,onClose:f,onReset:Lt,zIndex:B.zIndex!==void 0?B.zIndex+1:void 0,image:nt}))},Qe=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Po(e){var t=n.useState({}),o=q(t,2),a=o[0],i=o[1],l=n.useCallback(function(c,s){return i(function(f){return E(E({},f),{},fe({},c,s))}),function(){i(function(f){var h=E({},f);return delete h[c],h})}},[]),d=n.useMemo(function(){return e?e.map(function(c){if(typeof c=="string")return{data:{src:c}};var s={};return Object.keys(c).forEach(function(f){["src"].concat(Ze(Qe)).includes(f)&&(s[f]=c[f])}),{data:s}}):Object.keys(a).reduce(function(c,s){var f=a[s],h=f.canPreview,u=f.data;return h&&c.push({data:u,id:s}),c},[])},[e,a]);return[d,l,!!e]}var Oo=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],To=["src"],jo=function(t){var o,a=t.previewPrefixCls,i=a===void 0?"rc-image-preview":a,l=t.children,d=t.icons,c=d===void 0?{}:d,s=t.items,f=t.preview,h=t.fallback,u=Be(f)==="object"?f:{},p=u.visible,C=u.onVisibleChange,x=u.getContainer,M=u.current,$=u.movable,S=u.minScale,z=u.maxScale,O=u.countRender,N=u.closeIcon,v=u.onChange,y=u.onTransform,g=u.toolbarRender,b=u.imageRender,P=Ee(u,Oo),T=Po(s),w=q(T,3),L=w[0],A=w[1],j=w[2],r=qe(0,{value:M}),m=q(r,2),I=m[0],_=m[1],H=n.useState(!1),B=q(H,2),U=B[0],k=B[1],ee=((o=L[I])===null||o===void 0?void 0:o.data)||{},ae=ee.src,le=Ee(ee,To),Z=qe(!!p,{value:p,onChange:function(ie,ne){C==null||C(ie,ne,I)}}),se=q(Z,2),te=se[0],oe=se[1],X=n.useState(null),de=q(X,2),K=de[0],re=de[1],ue=n.useCallback(function(J,ie,ne,pe){var xe=j?L.findIndex(function(ve){return ve.data.src===ie}):L.findIndex(function(ve){return ve.id===J});_(xe<0?0:xe),oe(!0),re({x:ne,y:pe}),k(!0)},[L,j]);n.useEffect(function(){te?U||_(0):k(!1)},[te]);var D=function(ie,ne){_(ie),v==null||v(ie,ne)},F=function(){oe(!1),re(null)},Q=n.useMemo(function(){return{register:A,onPreview:ue}},[A,ue]);return n.createElement(Te.Provider,{value:Q},l,n.createElement(Ot,G({"aria-hidden":!te,movable:$,visible:te,prefixCls:i,closeIcon:N,onClose:F,mousePosition:K,imgCommonProps:le,src:ae,fallback:h,icons:c,minScale:S,maxScale:z,getContainer:x,current:I,count:L.length,countRender:O,onTransform:y,toolbarRender:g,imageRender:b,onChange:D},P)))},ft=0;function zo(e,t){var o=n.useState(function(){return ft+=1,String(ft)}),a=q(o,1),i=a[0],l=n.useContext(Te),d={data:t,canPreview:e};return n.useEffect(function(){if(l)return l.register(i,d)},[]),n.useEffect(function(){l&&l.register(i,d)},[e,t]),i}var Lo=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Ao=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],tt=function(t){var o=t.src,a=t.alt,i=t.onPreviewClose,l=t.prefixCls,d=l===void 0?"rc-image":l,c=t.previewPrefixCls,s=c===void 0?"".concat(d,"-preview"):c,f=t.placeholder,h=t.fallback,u=t.width,p=t.height,C=t.style,x=t.preview,M=x===void 0?!0:x,$=t.className,S=t.onClick,z=t.onError,O=t.wrapperClassName,N=t.wrapperStyle,v=t.rootClassName,y=Ee(t,Lo),g=f&&f!==!0,b=Be(M)==="object"?M:{},P=b.src,T=b.visible,w=T===void 0?void 0:T,L=b.onVisibleChange,A=L===void 0?i:L,j=b.getContainer,r=j===void 0?void 0:j,m=b.mask,I=b.maskClassName,_=b.movable,H=b.icons,B=b.scaleStep,U=b.minScale,k=b.maxScale,ee=b.imageRender,ae=b.toolbarRender,le=Ee(b,Ao),Z=P??o,se=qe(!!w,{value:w,onChange:A}),te=q(se,2),oe=te[0],X=te[1],de=Pt({src:o,isCustomPlaceholder:g,fallback:h}),K=q(de,3),re=K[0],ue=K[1],D=K[2],F=n.useState(null),Q=q(F,2),J=Q[0],ie=Q[1],ne=n.useContext(Te),pe=!!M,xe=function(){X(!1),ie(null)},ve=V(d,O,v,fe({},"".concat(d,"-error"),D==="error")),ge=n.useMemo(function(){var Ce={};return Qe.forEach(function(we){t[we]!==void 0&&(Ce[we]=t[we])}),Ce},Qe.map(function(Ce){return t[Ce]})),ke=n.useMemo(function(){return E(E({},ge),{},{src:Z})},[Z,ge]),Xe=zo(pe,ke),Ye=function(we){var je=wo(we.target),ze=je.left,Le=je.top;ne?ne.onPreview(Xe,Z,ze,Le):(ie({x:ze,y:Le}),X(!0)),S==null||S(we)};return n.createElement(n.Fragment,null,n.createElement("div",G({},y,{className:ve,onClick:pe?Ye:S,style:E({width:u,height:p},N)}),n.createElement("img",G({},ge,{className:V("".concat(d,"-img"),fe({},"".concat(d,"-img-placeholder"),f===!0),$),style:E({height:p},C),ref:re},ue,{width:u,height:p,onError:z})),D==="loading"&&n.createElement("div",{"aria-hidden":"true",className:"".concat(d,"-placeholder")},f),m&&pe&&n.createElement("div",{className:V("".concat(d,"-mask"),I),style:{display:(C==null?void 0:C.display)==="none"?"none":void 0}},m)),!ne&&pe&&n.createElement(Ot,G({"aria-hidden":!oe,visible:oe,prefixCls:s,onClose:xe,mousePosition:J,src:Z,alt:a,imageInfo:{width:u,height:p},fallback:h,getContainer:r,icons:H,movable:_,scaleStep:B,minScale:U,maxScale:k,rootClassName:v,imageRender:ee,imgCommonProps:ge,toolbarRender:ae},le)))};tt.PreviewGroup=jo;var _o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},Do=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:_o}))},Bo=n.forwardRef(Do),Ho={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Fo=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:Ho}))},ko=n.forwardRef(Fo),Xo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},Yo=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:Xo}))},vt=n.forwardRef(Yo),Wo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},Vo=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:Wo}))},Go=n.forwardRef(Vo),Zo={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},qo=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:Zo}))},Uo=n.forwardRef(qo);const Je=e=>({position:e||"absolute",inset:0}),Ko=e=>{const{iconCls:t,motionDurationSlow:o,paddingXXS:a,marginXXS:i,prefixCls:l,colorTextLightSolid:d}=e;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:d,background:new Re("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${o}`,[`.${l}-mask-info`]:Object.assign(Object.assign({},Xt),{padding:`0 ${Y(a)}`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}},Qo=e=>{const{previewCls:t,modalMaskBg:o,paddingSM:a,marginXL:i,margin:l,paddingLG:d,previewOperationColorDisabled:c,previewOperationHoverColor:s,motionDurationSlow:f,iconCls:h,colorTextLightSolid:u}=e,p=new Re(o).setA(.1),C=p.clone().setA(.2);return{[`${t}-footer`]:{position:"fixed",bottom:i,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:e.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:l},[`${t}-close`]:{position:"fixed",top:i,right:{_skip_check_:!0,value:i},display:"flex",color:u,backgroundColor:p.toRgbString(),borderRadius:"50%",padding:a,outline:0,border:0,cursor:"pointer",transition:`all ${f}`,"&:hover":{backgroundColor:C.toRgbString()},[`& > ${h}`]:{fontSize:e.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${Y(d)}`,backgroundColor:p.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:a,padding:a,cursor:"pointer",transition:`all ${f}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${h}`]:{color:s},"&-disabled":{color:c,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${h}`]:{fontSize:e.previewOperationSize}}}}},Jo=e=>{const{modalMaskBg:t,iconCls:o,previewOperationColorDisabled:a,previewCls:i,zIndexPopup:l,motionDurationSlow:d}=e,c=new Re(t).setA(.1),s=c.clone().setA(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:e.calc(l).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:e.imagePreviewSwitchSize,height:e.imagePreviewSwitchSize,marginTop:e.calc(e.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:e.previewOperationColor,background:c.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${d}`,userSelect:"none","&:hover":{background:s.toRgbString()},"&-disabled":{"&, &:hover":{color:a,background:"transparent",cursor:"not-allowed",[`> ${o}`]:{cursor:"not-allowed"}}},[`> ${o}`]:{fontSize:e.previewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:e.marginSM},[`${i}-switch-right`]:{insetInlineEnd:e.marginSM}}},en=e=>{const{motionEaseOut:t,previewCls:o,motionDurationSlow:a,componentCls:i}=e;return[{[`${i}-preview-root`]:{[o]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${o}-body`]:Object.assign(Object.assign({},Je()),{overflow:"hidden"}),[`${o}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${a} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Je()),{transition:`transform ${a} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${o}-moving`]:{[`${o}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${o}-wrap`]:{zIndex:e.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",zIndex:e.calc(e.zIndexPopup).add(1).equal()},"&":[Qo(e),Jo(e)]}]},tn=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:e.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},Ko(e)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},Je())}}},on=e=>{const{previewCls:t}=e;return{[`${t}-root`]:wt(e,"zoom"),"&":St(e,!0)}},nn=e=>({zIndexPopup:e.zIndexPopupBase+80,previewOperationColor:new Re(e.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new Re(e.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new Re(e.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:e.fontSizeIcon*1.5}),Tt=pt("Image",e=>{const t=`${e.componentCls}-preview`,o=Ge(e,{previewCls:t,modalMaskBg:new Re("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:e.controlHeightLG});return[tn(o),en(o),$t(Ge(o,{componentCls:t})),on(o)]},nn);var an=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(o[a[i]]=e[a[i]]);return o};const jt={rotateLeft:n.createElement(Bo,null),rotateRight:n.createElement(ko,null),zoomIn:n.createElement(Go,null),zoomOut:n.createElement(Uo,null),close:n.createElement(Ut,null),left:n.createElement(Ke,null),right:n.createElement(Ue,null),flipX:n.createElement(vt,null),flipY:n.createElement(vt,{rotate:90})},rn=e=>{var{previewPrefixCls:t,preview:o}=e,a=an(e,["previewPrefixCls","preview"]);const{getPrefixCls:i,direction:l}=n.useContext(Yt),d=i("image",t),c=`${d}-preview`,s=i(),f=yt(d),[h,u,p]=Tt(d,f),[C]=bt("ImagePreview",typeof o=="object"?o.zIndex:void 0),x=n.useMemo(()=>Object.assign(Object.assign({},jt),{left:l==="rtl"?n.createElement(Ue,null):n.createElement(Ke,null),right:l==="rtl"?n.createElement(Ke,null):n.createElement(Ue,null)}),[l]),M=n.useMemo(()=>{var $;if(o===!1)return o;const S=typeof o=="object"?o:{},z=V(u,p,f,($=S.rootClassName)!==null&&$!==void 0?$:"");return Object.assign(Object.assign({},S),{transitionName:He(s,"zoom",S.transitionName),maskTransitionName:He(s,"fade",S.maskTransitionName),rootClassName:z,zIndex:C})},[o,s,C,u,p,f]);return h(n.createElement(tt.PreviewGroup,Object.assign({preview:M,previewPrefixCls:c,icons:x},a)))};var gt=function(e,t){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(e);i<a.length;i++)t.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(e,a[i])&&(o[a[i]]=e[a[i]]);return o};const zt=e=>{const{prefixCls:t,preview:o,className:a,rootClassName:i,style:l,fallback:d}=e,c=gt(e,["prefixCls","preview","className","rootClassName","style","fallback"]),{getPrefixCls:s,getPopupContainer:f,className:h,style:u,preview:p,fallback:C}=Wt("image"),[x]=Vt("Image"),M=s("image",t),$=s(),S=yt(M),[z,O,N]=Tt(M,S),v=V(i,O,N,S),y=V(a,O,h),[g]=bt("ImagePreview",typeof o=="object"?o.zIndex:void 0),b=n.useMemo(()=>{if(o===!1)return o;const w=typeof o=="object"?o:{},{getContainer:L,closeIcon:A,rootClassName:j,destroyOnClose:r,destroyOnHidden:m}=w,I=gt(w,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:n.createElement("div",{className:`${M}-mask-info`},n.createElement(Kt,null),x==null?void 0:x.preview),icons:jt},I),{destroyOnClose:m??r,rootClassName:V(v,j),getContainer:L??f,transitionName:He($,"zoom",w.transitionName),maskTransitionName:He($,"fade",w.maskTransitionName),zIndex:g,closeIcon:A??(p==null?void 0:p.closeIcon)})},[o,x,p==null?void 0:p.closeIcon]),P=Object.assign(Object.assign({},u),l),T=d??C;return z(n.createElement(tt,Object.assign({prefixCls:M,preview:b,rootClassName:v,className:y,style:P,fallback:T},c)))};zt.PreviewGroup=rn;var ln={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}}]},name:"picture",theme:"outlined"},sn=function(t,o){return n.createElement(Pe,G({},t,{ref:o,icon:ln}))},cn=n.forwardRef(sn);const be={getAll:async e=>{const{data:t}=await he.get("/projects",{params:e});return t},getById:async e=>{const{data:t}=await he.get(`/projects/${e}`);return t},create:async e=>{const{data:t}=await he.post("/projects",e);return t},update:async(e,t)=>{const{data:o}=await he.put(`/projects/${e}`,t);return o},delete:async e=>{const{data:t}=await he.delete(`/projects/${e}`);return t},uploadImage:async(e,t)=>{const o=new FormData;o.append("image",t);const{data:a}=await he.put(`/projects/${e}/image`,o,{headers:{"Content-Type":"multipart/form-data"}});return a},deleteImage:async e=>{const{data:t}=await he.delete(`/projects/${e}/image`);return t},uploadGallery:async(e,t)=>{const{data:o}=await he.put(`/projects/${e}/gallery`,t,{headers:{"Content-Type":"multipart/form-data"}});return o},deleteGalleryImage:async(e,t)=>{const{data:o}=await he.delete(`/projects/${e}/gallery/${t}`);return o}},{TextArea:dn}=xt,zn=()=>{var A,j;const[e,t]=n.useState(!1),[o,a]=n.useState(null),[i,l]=n.useState(""),d=oo(i,500),[c]=Ie.useForm(),s=Gt(),[f,h]=n.useState(!1),[u,p]=n.useState(null),{data:C,isLoading:x}=rt({queryKey:["projects",d],queryFn:()=>be.getAll({limit:100,search:d})}),{data:M}=rt({queryKey:["categories"],queryFn:()=>Qt.getAll()}),$=(C==null?void 0:C.data)||[],S=Se({mutationFn:r=>be.create(r),onSuccess:()=>{ce.success("Ish yaratildi!"),s.invalidateQueries({queryKey:["projects"]}),P()},onError:r=>{var I,_,H,B;console.error("Create Project Error:",r);const m=((_=(I=r.response)==null?void 0:I.data)==null?void 0:_.error)||((B=(H=r.response)==null?void 0:H.data)==null?void 0:B.message)||r.message||"Noma'lum xatolik";ce.error(m)}}),z=Se({mutationFn:({id:r,data:m})=>be.update(r,m),onSuccess:()=>{ce.success("Ish yangilandi!"),s.invalidateQueries({queryKey:["projects"]}),P()},onError:r=>{var I,_,H,B;console.error("Update Project Error:",r);const m=((_=(I=r.response)==null?void 0:I.data)==null?void 0:_.error)||((B=(H=r.response)==null?void 0:H.data)==null?void 0:B.message)||r.message||"Noma'lum xatolik";ce.error(m)}}),O=Se({mutationFn:r=>be.delete(r),onSuccess:()=>{ce.success("Ish o'chirildi!"),s.invalidateQueries({queryKey:["projects"]})},onError:()=>ce.error("Xatolik yuz berdi")}),N=Se({mutationFn:({id:r,file:m})=>be.uploadImage(r,m),onSuccess:r=>{ce.success("Rasm yuklandi!"),s.invalidateQueries({queryKey:["projects"]}),a(m=>{var I;return m&&{...m,image:(I=r.data)==null?void 0:I.image}})},onError:()=>ce.error("Rasm yuklashda xatolik")}),v=Se({mutationFn:r=>be.deleteImage(r),onSuccess:()=>{ce.success("Rasm o'chirildi!"),s.invalidateQueries({queryKey:["projects"]}),a(r=>r&&{...r,image:void 0})},onError:()=>ce.error("Rasm o'chirishda xatolik")}),y=Se({mutationFn:({id:r,file:m})=>{const I=new FormData;return I.append("image",m),be.uploadGallery(r,I)},onSuccess:r=>{ce.success("Rasm yuklandi"),s.invalidateQueries({queryKey:["projects"]}),p(m=>{var I;return m&&{...m,gallery:((I=r.data)==null?void 0:I.gallery)||m.gallery}})},onError:()=>ce.error("Rasm yuklashda xatolik")}),g=Se({mutationFn:({id:r,index:m})=>be.deleteGalleryImage(r,m),onSuccess:(r,m)=>{ce.success("Rasm o'chirildi"),s.invalidateQueries({queryKey:["projects"]}),p(I=>I&&{...I,gallery:(I.gallery||[]).filter((_,H)=>H!==m.index)})},onError:()=>ce.error("O'chirishda xatolik")}),b=r=>{var m;r?(a(r),c.setFieldsValue({...r,categoryId:typeof r.category=="object"?(m=r.category)==null?void 0:m.id:r.categoryId})):(a(null),c.resetFields()),t(!0)},P=()=>{t(!1),a(null),c.resetFields()},T=async r=>{const{image:m,...I}=r,_={...I,categoryId:r.categoryId};o?z.mutate({id:o.id,data:_}):S.mutate(_)},w=r=>{if(r){if(typeof r=="string")return r;if(typeof r=="object"&&r.url)return r.url}},L=[{title:"Rasm",dataIndex:"image",key:"image",width:60,render:r=>{const m=w(r);return m?R.jsx("img",{src:m,alt:"",style:{width:40,height:40,objectFit:"cover",borderRadius:6}}):"-"}},{title:"Nomi",dataIndex:"title",key:"title",sorter:(r,m)=>r.title.localeCompare(m.title),render:r=>R.jsx("strong",{children:r})},{title:"Kategoriya",dataIndex:"category",key:"category",render:r=>R.jsx(Ve,{color:"blue",children:typeof r=="object"?r.name:r})},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Published",value:"published"},{text:"Draft",value:"draft"},{text:"Archived",value:"archived"}],onFilter:(r,m)=>m.status===r,render:r=>R.jsx(Ve,{color:r==="published"?"green":r==="draft"?"orange":"default",children:r})},{title:"Featured",dataIndex:"isFeatured",key:"isFeatured",filters:[{text:"Featured",value:!0},{text:"Regular",value:!1}],onFilter:(r,m)=>m.isFeatured===r,render:r=>r?R.jsx(Ve,{color:"gold",children:"Featured"}):"-"},{title:"Ko'rishlar",dataIndex:"views",key:"views",sorter:(r,m)=>(r.views||0)-(m.views||0)},{title:"Amallar",key:"actions",width:120,render:(r,m)=>R.jsx(eo,{onView:()=>{p(m),h(!0)},viewIcon:R.jsx(cn,{}),onEdit:()=>b(m),onDelete:()=>O.mutate(m.id),deleteLoading:O.isPending})}];return R.jsxs(R.Fragment,{children:[R.jsx(to,{title:"Amaliyotlar (Keyslar)",onAdd:()=>b(),addButtonText:"Yangi amaliyot",onSearch:l,searchPlaceholder:"Amaliyotlarni qidirish...",children:R.jsx(no,{columns:L,dataSource:$,rowKey:"id",loading:x,pagination:{pageSize:10,showSizeChanger:!0,showTotal:r=>`Jami: ${r}`},size:"middle"})}),R.jsxs(Jt,{open:e,onClose:P,title:o?"Amaliyotni tahrirlash":"Yangi amaliyot",loading:S.isPending||z.isPending,form:c,onSubmit:T,isEdit:!!o,width:500,children:[R.jsx(Ie.Item,{name:"title",label:"Nomi",rules:[{required:!0}],children:R.jsx(xt,{placeholder:"Ish nomi"})}),R.jsx(Ie.Item,{name:"description",label:"Tavsif",rules:[{required:!0}],children:R.jsx(dn,{rows:3,placeholder:"Ish tavsifi"})}),R.jsx(Ie.Item,{name:"categoryId",label:"Kategoriya",rules:[{required:!0,message:"Kategoriyani tanlang"}],children:R.jsx(Me,{placeholder:"Kategoriya tanlang",children:(A=M==null?void 0:M.data)==null?void 0:A.map(r=>R.jsx(Me.Option,{value:r.id,children:r.name},r.id))})}),o&&R.jsx(Ie.Item,{label:"Rasm",children:R.jsxs("div",{className:"space-y-2",children:[w(o.image)&&R.jsxs("div",{className:"relative",children:[R.jsx("img",{src:w(o.image),alt:"Preview",style:{width:"100%",height:160,objectFit:"cover",borderRadius:8}}),R.jsx(_e,{danger:!0,size:"small",icon:R.jsx(it,{}),onClick:()=>v.mutate(o.id),loading:v.isPending,style:{position:"absolute",top:8,right:8}})]}),R.jsx(lt,{showUploadList:!1,accept:"image/*",beforeUpload:r=>(N.mutate({id:o.id,file:r}),!1),children:R.jsx(_e,{icon:R.jsx(st,{}),loading:N.isPending,children:"Rasm yuklash"})})]})}),R.jsx(Ie.Item,{name:"status",label:"Status",initialValue:"published",children:R.jsxs(Me,{children:[R.jsx(Me.Option,{value:"draft",children:"Draft"}),R.jsx(Me.Option,{value:"published",children:"Published"}),R.jsx(Me.Option,{value:"archived",children:"Archived"})]})}),R.jsx(Ie.Item,{name:"isFeatured",label:"Featured",valuePropName:"checked",children:R.jsx(ao,{})})]}),R.jsxs(ro,{title:`${u==null?void 0:u.title} â€” Galereya`,open:f,onClose:()=>{h(!1),p(null)},width:600,children:[R.jsx("div",{className:"mb-4",children:R.jsx(lt,{showUploadList:!1,beforeUpload:r=>(u&&y.mutate({id:u.id,file:r}),!1),accept:"image/*",children:R.jsx(_e,{icon:R.jsx(st,{}),loading:y.isPending,children:"Rasm qo'shish"})})}),R.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[(j=u==null?void 0:u.gallery)==null?void 0:j.map((r,m)=>{const I=w(r);return I?R.jsxs("div",{className:"relative group border rounded-lg overflow-hidden",children:[R.jsx(zt,{src:I,alt:`Gallery ${m}`,className:"object-cover w-full h-40",width:"100%",height:160}),R.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:R.jsx(_e,{danger:!0,size:"small",icon:R.jsx(it,{}),onClick:()=>{u&&g.mutate({id:u.id,index:m})},loading:g.isPending})})]},m):null}),(!(u!=null&&u.gallery)||u.gallery.length===0)&&R.jsx("div",{className:"col-span-2 text-center py-8 text-gray-400 border-dashed border-2 rounded-lg",children:"Rasmlar yo'q"})]})]})]})};export{zn as default};
