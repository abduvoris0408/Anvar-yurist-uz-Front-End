import{r as z,I as B,_ as V,G as _,k as e,B as u}from"./index-F3grSWdG.js";import{u as G}from"./useClosable-uJIj1gsA.js";import{u as v,s as x}from"./index-DVxfzCL-.js";import{c as p,b as f,C as r,T as W}from"./client-CX91g6yc.js";import{P as J}from"./PageHeader-Cabh6d31.js";import{F as s}from"./index-Cv5QttRn.js";import{I as t}from"./index-CZbTi1p4.js";import{S as I,P as w}from"./index-C7_EJlaz.js";import{S as X}from"./index-DEZQ1x4x.js";import{R as q}from"./SaveOutlined-BZAqOSCn.js";import{C as y,S as C,R as P,T as Z}from"./index-lsxE6RmN.js";import{A as ee}from"./index-D6kZoG9a.js";import{R as ae}from"./UserOutlined-E_8sHuto.js";import{U as M,R as S}from"./UploadOutlined-C8kOzndP.js";import{R}from"./DeleteOutlined-iu_k66-Y.js";import{T as E}from"./index-DLxPakHX.js";import"./InfoCircleFilled-C9q2btrd.js";import"./QuestionCircleOutlined-NOAkvmT8.js";import"./DownOutlined-Bz--1KPw.js";var se={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},ie=function(o,j){return z.createElement(B,V({},o,{ref:j,icon:se}))},Q=z.forwardRef(ie);const g={getPublic:async()=>{const{data:n}=await p.get("/about");return n},getAdmin:async()=>{const{data:n}=await p.get("/about/admin");return n},createOrUpdate:async n=>{const{data:o}=await p.post("/about",n);return o},delete:async()=>{const{data:n}=await p.delete("/about");return n},uploadAvatar:async n=>{const o=new FormData;o.append("avatar",n);const{data:j}=await p.put("/about/avatar",o,{headers:{"Content-Type":"multipart/form-data"}});return j},uploadCover:async n=>{const o=new FormData;o.append("cover",n);const{data:j}=await p.put("/about/cover",o,{headers:{"Content-Type":"multipart/form-data"}});return j},uploadResume:async n=>{const o=new FormData;o.append("resume",n);const{data:j}=await p.put("/about/resume",o,{headers:{"Content-Type":"multipart/form-data"}});return j},deleteAvatar:async()=>{const{data:n}=await p.delete("/about/avatar");return n},deleteCover:async()=>{const{data:n}=await p.delete("/about/cover");return n},deleteResume:async()=>{const{data:n}=await p.delete("/about/resume");return n},updateSection:async(n,o)=>{const{data:j}=await p.patch(`/about/${n}`,o);return j}},{TextArea:U}=t,{Text:re}=W,ke=()=>{const[n]=s.useForm(),o=_(),[j,D]=z.useState("basic"),{data:k,isLoading:K}=G({queryKey:["about-admin"],queryFn:()=>g.getAdmin()}),i=k==null?void 0:k.data,T=v({mutationFn:a=>g.createOrUpdate(a),onSuccess:()=>{x.success("Ma'lumotlar saqlandi!"),o.invalidateQueries({queryKey:["about-admin"]})},onError:a=>{var d,m,l,c;console.error("Save About Error:",a);const h=((m=(d=a.response)==null?void 0:d.data)==null?void 0:m.error)||((c=(l=a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message||"Noma'lum xatolik";x.error(h)}}),A=v({mutationFn:a=>g.uploadAvatar(a),onSuccess:()=>{x.success("Avatar yuklandi!"),o.invalidateQueries({queryKey:["about-admin"]})},onError:a=>{var d,m,l,c;console.error("Avatar Upload Error:",a);const h=((m=(d=a.response)==null?void 0:d.data)==null?void 0:m.error)||((c=(l=a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message||"Avatar yuklashda xatolik!";x.error(h)}}),F=v({mutationFn:a=>g.uploadCover(a),onSuccess:()=>{x.success("Cover rasm yuklandi!"),o.invalidateQueries({queryKey:["about-admin"]})},onError:a=>{var d,m,l,c;console.error("Cover Upload Error:",a);const h=((m=(d=a.response)==null?void 0:d.data)==null?void 0:m.error)||((c=(l=a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message||"Cover yuklashda xatolik!";x.error(h)}}),O=v({mutationFn:a=>g.uploadResume(a),onSuccess:()=>{x.success("Resume yuklandi!"),o.invalidateQueries({queryKey:["about-admin"]})},onError:a=>{var d,m,l,c;console.error("Resume Upload Error:",a);const h=((m=(d=a.response)==null?void 0:d.data)==null?void 0:m.error)||((c=(l=a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message||"Resume yuklashda xatolik!";x.error(h)}}),N=v({mutationFn:()=>g.deleteAvatar(),onSuccess:()=>{x.success("Avatar o'chirildi!"),o.invalidateQueries({queryKey:["about-admin"]})}}),L=v({mutationFn:()=>g.deleteCover(),onSuccess:()=>{x.success("Cover o'chirildi!"),o.invalidateQueries({queryKey:["about-admin"]})}}),Y=v({mutationFn:()=>g.deleteResume(),onSuccess:()=>{x.success("Resume o'chirildi!"),o.invalidateQueries({queryKey:["about-admin"]})}}),b=v({mutationFn:({section:a,data:h})=>g.updateSection(a,h),onSuccess:()=>{x.success("Bo'lim yangilandi!"),o.invalidateQueries({queryKey:["about-admin"]})},onError:a=>{var d,m,l,c;console.error("Section Update Error:",a);const h=((m=(d=a.response)==null?void 0:d.data)==null?void 0:m.error)||((c=(l=a.response)==null?void 0:l.data)==null?void 0:c.message)||a.message||"Noma'lum xatolik";x.error(h)}}),H=a=>{T.mutate(a)},$=[{key:"basic",label:"Asosiy",children:e.jsxs(s,{form:n,layout:"vertical",initialValues:i||{},onFinish:H,requiredMark:!1,children:[e.jsxs(f,{gutter:24,children:[e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"fullName",label:"To'liq ism",rules:[{required:!0}],children:e.jsx(t,{placeholder:"Abduvoris Abduvoxidov"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"title",label:"Lavozim",rules:[{required:!0}],children:e.jsx(t,{placeholder:"Yurist"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"subtitle",label:"Qo'shimcha sarlavha",children:e.jsx(t,{placeholder:"Professional huquqiy xizmatlar"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"email",label:"Email",children:e.jsx(t,{placeholder:"info@example.com"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"phone",label:"Telefon",children:e.jsx(t,{placeholder:"+998 90 123 45 67"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"address",label:"Manzil",children:e.jsx(t,{placeholder:"Toshkent, O'zbekiston"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"birthday",label:"Tug'ilgan sana",children:e.jsx(t,{placeholder:"2004-08-15"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"nationality",label:"Millati",children:e.jsx(t,{placeholder:"O'zbek"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"freelanceStatus",label:"Konsultatsiya holati",children:e.jsxs(I,{children:[e.jsx(I.Option,{value:"available",children:"Mavjud âœ…"}),e.jsx(I.Option,{value:"busy",children:"Band ðŸ”¶"}),e.jsx(I.Option,{value:"not_available",children:"Mavjud emas âŒ"})]})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{name:"isActive",label:"Faol",valuePropName:"checked",children:e.jsx(X,{})})}),e.jsx(r,{xs:24,children:e.jsx(s.Item,{name:"shortBio",label:"Qisqa bio",children:e.jsx(t,{placeholder:"Yurist | Huquqiy maslahatchi"})})}),e.jsx(r,{xs:24,children:e.jsx(s.Item,{name:"bio",label:"To'liq bio",children:e.jsx(U,{rows:4,placeholder:"Men 10 yillik huquqiy tajribaga ega yuristman..."})})})]}),e.jsx(s.Item,{children:e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:T.isPending,children:"Saqlash"})})]},i==null?void 0:i.id)},{key:"media",label:"Rasmlar & Resume",children:e.jsxs(f,{gutter:[24,24],children:[e.jsx(r,{xs:24,md:8,children:e.jsx(y,{title:"Avatar",size:"small",children:e.jsxs(C,{direction:"vertical",align:"center",className:"w-full",children:[e.jsx(ee,{size:100,icon:e.jsx(ae,{}),src:i==null?void 0:i.avatar,style:{backgroundColor:"var(--primary-light)",color:"var(--primary-color)"}}),e.jsx(M,{showUploadList:!1,beforeUpload:a=>(A.mutate(a),!1),accept:"image/*",children:e.jsx(u,{icon:e.jsx(S,{}),loading:A.isPending,children:"Yuklash"})}),(i==null?void 0:i.avatar)&&e.jsx(w,{title:"O'chirishni tasdiqlaysizmi?",onConfirm:()=>N.mutate(),children:e.jsx(u,{danger:!0,icon:e.jsx(R,{}),size:"small",children:"O'chirish"})})]})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(y,{title:"Cover rasm",size:"small",children:e.jsxs(C,{direction:"vertical",align:"center",className:"w-full",children:[i!=null&&i.cover?e.jsx("img",{src:i.cover,alt:"cover",style:{width:"100%",borderRadius:8,maxHeight:100,objectFit:"cover"}}):e.jsx("div",{style:{width:"100%",height:100,background:"var(--bg-input)",borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(re,{style:{color:"var(--text-muted)"},children:"Rasm yo'q"})}),e.jsx(M,{showUploadList:!1,beforeUpload:a=>(F.mutate(a),!1),accept:"image/*",children:e.jsx(u,{icon:e.jsx(S,{}),loading:F.isPending,children:"Yuklash"})}),(i==null?void 0:i.cover)&&e.jsx(w,{title:"O'chirishni tasdiqlaysizmi?",onConfirm:()=>L.mutate(),children:e.jsx(u,{danger:!0,icon:e.jsx(R,{}),size:"small",children:"O'chirish"})})]})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(y,{title:"Resume (PDF/DOC)",size:"small",children:e.jsxs(C,{direction:"vertical",align:"center",className:"w-full",children:[i!=null&&i.resume?e.jsx(E,{color:"green",children:"Resume yuklangan âœ…"}):e.jsx(E,{color:"default",children:"Resume yo'q"}),e.jsx(M,{showUploadList:!1,beforeUpload:a=>(O.mutate(a),!1),accept:".pdf,.doc,.docx",children:e.jsx(u,{icon:e.jsx(S,{}),loading:O.isPending,children:"Yuklash"})}),(i==null?void 0:i.resume)&&e.jsx(w,{title:"O'chirishni tasdiqlaysizmi?",onConfirm:()=>Y.mutate(),children:e.jsx(u,{danger:!0,icon:e.jsx(R,{}),size:"small",children:"O'chirish"})})]})})})]})},{key:"social",label:"Ijtimoiy tarmoqlar",children:e.jsx(y,{size:"small",children:e.jsxs(s,{layout:"vertical",initialValues:(i==null?void 0:i.socialLinks)||{},onFinish:a=>b.mutate({section:"socialLinks",data:a}),requiredMark:!1,children:[e.jsxs(f,{gutter:16,children:[e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"github",label:"GitHub",children:e.jsx(t,{placeholder:"https://github.com/..."})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"linkedin",label:"LinkedIn",children:e.jsx(t,{placeholder:"https://linkedin.com/in/..."})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"telegram",label:"Telegram",children:e.jsx(t,{placeholder:"https://t.me/..."})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"twitter",label:"Twitter",children:e.jsx(t,{placeholder:"https://twitter.com/..."})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"instagram",label:"Instagram",children:e.jsx(t,{placeholder:"https://instagram.com/..."})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"youtube",label:"YouTube",children:e.jsx(t,{placeholder:"https://youtube.com/..."})})})]}),e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:b.isPending,children:"Saqlash"})]})})},{key:"stats",label:"Statistika",children:e.jsx(y,{size:"small",children:e.jsxs(s,{layout:"vertical",initialValues:(i==null?void 0:i.stats)||{},onFinish:a=>b.mutate({section:"stats",data:a}),requiredMark:!1,children:[e.jsxs(f,{gutter:16,children:[e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"projectsCompleted",label:"Hal qilingan ishlar",children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"happyClients",label:"Mamnun mijozlar",children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"yearsExperience",label:"Yillik tajriba",children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"awardsWon",label:"Mukofotlar",children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"coffeesDrunk",label:"Konsultatsiyalar â˜Ž",children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:8,children:e.jsx(s.Item,{name:"linesOfCode",label:"Shartnomalar",children:e.jsx(t,{type:"number"})})})]}),e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:b.isPending,children:"Saqlash"})]})})},{key:"interests",label:"Qiziqishlar",children:e.jsx(y,{size:"small",children:e.jsxs(s,{layout:"vertical",initialValues:{interests:(i==null?void 0:i.interests)||[]},onFinish:a=>b.mutate({section:"interests",data:a}),requiredMark:!1,children:[e.jsx(s.List,{name:"interests",children:(a,{add:h,remove:d})=>e.jsxs(e.Fragment,{children:[a.map(({key:m,name:l,...c})=>e.jsxs(f,{gutter:16,align:"middle",children:[e.jsx(r,{xs:24,md:10,children:e.jsx(s.Item,{...c,name:[l,"name"],rules:[{required:!0,message:"Nomini kiriting"}],children:e.jsx(t,{placeholder:"Qiziqish nomi (masalan, Kitob o'qish)"})})}),e.jsx(r,{xs:24,md:10,children:e.jsx(s.Item,{...c,name:[l,"icon"],rules:[{required:!0,message:"Icon kiriting"}],children:e.jsx(t,{placeholder:"Icon nomi (masalan, book)"})})}),e.jsx(r,{xs:24,md:4,children:e.jsx(s.Item,{children:e.jsx(u,{type:"dashed",onClick:()=>d(l),icon:e.jsx(Q,{}),danger:!0,block:!0,children:"O'chirish"})})})]},m)),e.jsx(s.Item,{children:e.jsx(u,{type:"dashed",onClick:()=>h(),block:!0,icon:e.jsx(P,{}),children:"Qiziqish qo'shish"})})]})}),e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:b.isPending,children:"Saqlash"})]})})},{key:"whatIDo",label:"Nima qilaman",children:e.jsx(y,{size:"small",children:e.jsxs(s,{layout:"vertical",initialValues:{whatIDo:(i==null?void 0:i.whatIDo)||[]},onFinish:a=>b.mutate({section:"whatIDo",data:a}),requiredMark:!1,children:[e.jsx(s.List,{name:"whatIDo",children:(a,{add:h,remove:d})=>e.jsxs(e.Fragment,{children:[a.map(({key:m,name:l,...c})=>e.jsx(y,{size:"small",className:"mb-4 bg-gray-50",children:e.jsxs(f,{gutter:16,children:[e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{...c,name:[l,"title"],label:"Sarlavha",rules:[{required:!0,message:"Sarlavhani kiriting"}],children:e.jsx(t,{placeholder:"Huquqiy xizmatlar"})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{...c,name:[l,"icon"],label:"Icon",rules:[{required:!0,message:"Icon kiriting"}],children:e.jsx(t,{placeholder:"gavel"})})}),e.jsx(r,{xs:24,children:e.jsx(s.Item,{...c,name:[l,"description"],label:"Tavsif",rules:[{required:!0,message:"Tavsifni kiriting"}],children:e.jsx(U,{rows:2,placeholder:"Men professional huquqiy maslahat beraman..."})})}),e.jsx(r,{xs:24,md:12,children:e.jsx(s.Item,{...c,name:[l,"order"],label:"Tartib raqami",initialValue:0,children:e.jsx(t,{type:"number"})})}),e.jsx(r,{xs:24,md:12,className:"flex items-end",children:e.jsx(s.Item,{children:e.jsx(u,{type:"dashed",onClick:()=>d(l),icon:e.jsx(Q,{}),danger:!0,children:"O'chirish"})})})]})},m)),e.jsx(s.Item,{children:e.jsx(u,{type:"dashed",onClick:()=>h(),block:!0,icon:e.jsx(P,{}),children:"Yangi xizmat/faoliyat qo'shish"})})]})}),e.jsx(u,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:b.isPending,children:"Saqlash"})]})})}];return e.jsxs("div",{className:"space-y-4",children:[e.jsx(J,{title:"Men haqimda",subtitle:"Shaxsiy ma'lumotlarni boshqarish"}),e.jsx(y,{loading:K,children:e.jsx(Z,{activeKey:j,onChange:D,items:$})})]})};export{ke as default};
